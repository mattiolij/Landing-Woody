(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[4],{628:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i});var o={AD:"376",AE:"971",AF:"93",AG:"1",AI:"1",AL:"355",AM:"374",AO:"244",AR:"54",AT:"43",AU:"61",AW:"297",AX:"358",AZ:"994",BA:"387",BB:"1",BD:"880",BE:"32",BF:"226",BG:"359",BH:"973",BI:"257",BJ:"229",BM:"1",BN:"673",BO:"591",BR:"55",BS:"1",BT:"975",BW:"267",BY:"375",BZ:"501",CA:"1",CD:"243",CF:"236",CG:"242",CH:"41",CI:"225",CL:"56",CM:"237",CN:"86",CO:"57",CR:"506",CU:"53",CV:"238",CY:"357",CW:"599",CZ:"420",DE:"49",DJ:"253",DK:"45",DM:"1",DO:"1",DZ:"213",EC:"593",EE:"372",EG:"20",ER:"291",ES:"34",ET:"251",FI:"358",FJ:"679",FK:"500",FM:"691",FO:"298",FR:"33",GA:"241",GB:"44",GD:"1",GE:"995",GG:"44",GH:"233",GI:"350",GM:"220",GN:"224",GQ:"240",GR:"30",GT:"502",GW:"245",GY:"592",HK:"852",HN:"504",HR:"385",HT:"509",HU:"36",ID:"62",IE:"353",IL:"972",IM:"44",IN:"91",IQ:"964",IR:"98",IS:"354",IT:"39",JE:"44",JM:"1",JO:"962",JP:"81",KE:"254",KG:"996",KH:"855",KM:"269",KN:"1",KP:"850",KR:"82",KW:"965",KY:"1",KZ:"7",LA:"856",LB:"961",LC:"1",LI:"423",LK:"94",LR:"231",LS:"266",LT:"370",LU:"352",LV:"371",LY:"218",MA:"212",MC:"377",MD:"373",ME:"382",MG:"261",MK:"389",ML:"223",MM:"95",MN:"976",MO:"853",MR:"222",MS:"1",MT:"356",MU:"230",MV:"960",MW:"265",MX:"52",MY:"60",MZ:"258",NA:"264",NE:"227",NG:"234",NI:"505",NL:"31",NO:"47",NP:"977",NZ:"64",OM:"968",PA:"507",PE:"51",PF:"689",PG:"675",PH:"63",PK:"92",PL:"48",PR:"1",PS:"970",PT:"351",PW:"680",PY:"595",QA:"974",RE:"262",RO:"40",RS:"381",RU:"7",RW:"250",SA:"966",SB:"677",SC:"248",SD:"249",SE:"46",SG:"65",SH:"290",SI:"386",SK:"421",SL:"232",SM:"378",SN:"221",SO:"252",SR:"597",ST:"239",SV:"503",SY:"963",SZ:"268",TC:"1",TD:"235",TG:"228",TH:"66",TJ:"992",TL:"670",TM:"993",TN:"216",TO:"676",TR:"90",TT:"1",TW:"886",TZ:"255",UA:"380",UG:"256",US:"1",UY:"598",UZ:"998",VC:"1",VE:"58",VG:"1",VN:"84",VU:"678",WS:"685",YE:"967",ZA:"27",ZM:"260",ZW:"263"},a=function(e){return o[e]||""},r=function(e,t){return t.replace("+".concat(a(e)),"")},i=function(){return Object.keys(o)}},732:function(e,t){e.exports=function(e){var t=e.node;return{setSelection:function(e,n){if(void 0===n&&"number"==typeof e?n=e:void 0===n&&(n=e.end,e=e.start),void 0!==t.selectionStart)t.selectionStart=e,t.selectionEnd=n;else{var o=t.createTextRange();o.collapse(!0),o.moveStart("character",e),o.moveEnd("character",n-e),o.select()}},getSelection:function(){var e,n;if(void 0!==t.selectionStart)e=t.selectionStart,n=t.selectionEnd;else{var o=document.selection.createRange();null==o&&(e=n=0);var a=t.createTextRange(),r=a.duplicate();a.moveToBookmark(o.getBookmark()),r.setEndPoint("EndToEnd",a),n=r.text.length,r.setEndPoint("EndToStart",a),e=r.text.length}return{start:e,end:n}}}}},733:function(e,t,n){var o=n(732);e.exports=function(e){var t=[40,37,39,38,32,8,13,46,9],n=[48,49,50,51,52,53,54,55,56,57],a=[96,97,98,99,100,101,102,103,104,105],r=!e;return function(e,i,l,c,s,u){if(l=function(e){return" "+e+" "}(l||"-"),i=i||"YYYYMMDD",s=s||!1,!e)return!1;var d="",p=[0,0,0],h=e,m=h.value,f={d:-1,m:-1,y:-1},b=l.length,g="DD".length+b+"MM".length+b+"YYYY".length,v=[],y="",C=function(e,t,n,o){var a=e.addEventListener?"addEventListener":"attachEvent";e[a]("attachEvent"===a?"on".concat(t):t,n,o)},k=function(e,t,n){n=n||d;var o=m.split(l),a=o[f[n]],r=parseInt(a,10),i=(new Date).toISOString();if("reset"===e)switch(n){case"d":a=c.substring(v[f.d][0],v[f.d][1]);break;case"m":a=c.substring(v[f.m][0],v[f.m][1]);break;case"y":a=c.substring(v[f.y][0],v[f.y][1])}else if("overwrite"===e&&"number"==typeof t){if("y"===n){var s=/[^0-9]/g;s.test(a)&&(a=a.replace(s,"0")),a=a.substr(1,3)+t}else 0===r&&0===t?a="01":0===p[f[n]]&&t>=0<=3?a=t:"d"===n&&r<=3||"m"===n&&r<=1?(a=a.charAt(1),("d"===n&&3===r&&t>1||"m"===n&&1===r&&t>2)&&(t="d"===n?1:2),a+=t.toString()):a=t;p[f[n]]++}else if("number"==typeof t&&isNaN(r))switch(n){case"d":a=parseInt(i.substring(8,10),10);break;case"m":a=parseInt(i.substring(5,7),10);break;case"y":a=parseInt(i.substring(0,4),10)}else{if("number"!=typeof t)return;a=r+t,("d"===n&&32===a||"m"===n&&13===a)&&(a=1),"d"===n&&0===a&&(a=31),"m"===n&&0===a&&(a=12)}((a=a.toString()).length<2||"y"===n&&a.length<4)&&(a=F(a)+a),o[f[n]]=a,L(A(o[0],o[1],o[2])),P(0)},w=function(){var e=void 0!==h.selectionStart?h.selectionStart:function(e){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}(h),t=x(),n=E(t);B(e>t&&e<=t+"MM".length+b?[t+b,t+"MM".length+b]:e>=n&&e<g?[n,g]:[0,t])},S=function(){var e="",t="";return I()?(t=A(i.substr(0,4),i.substr(4,2),i.substr(6,2)),e=A(c.substr(0,4),c.substr(5,2),c.substr(8,2))):(t=A(i.substr(0,2),i.substr(2,2),i.substr(4,4)),e=A(c.substr(0,2),c.substr(3,2),c.substr(6,4))),y=t,c=e},E=function(e){return g-(6-e)},O=function(e,t){e=e||!1,t=t||d;var n=m.split(l)[f[t]];return"default"===e?"DD"===n||"MM"===n||"YYYY"===n:n},x=function(){return I()?"YYYY".length:"DD".length},R=function(){var e;if(s)e=m;else{var t=m.split(l),n=t[f.y],o=t[f.m],a=t[f.d];e="".concat(n,"-").concat(o,"-").concat(a)}return e},I=function(){return"Y"===i.charAt(0)},A=function(e,t,n){return e+l+t+l+n},T=function(e){e.preventDefault();var o=e.keyCode,i=String.fromCharCode(o);if(t.indexOf(o)<0&&n.indexOf(o)<0&&a.indexOf(o)<0)return!1;switch(a.indexOf(o)>-1&&(o-=48,i=String.fromCharCode(o)),e.preventDefault?e.preventDefault():9===o&&(e.shiftKey&&0===f[d]||2===f[d])||(e.returnValue=!1),!0){case 38===o:k("inc",1);break;case 40===o:k("inc",-1);break;case 37===o:case 9===o&&e.shiftKey:P(-1,e);break;case 39===o:case 13===o:case 9===o:case 32===o:P(1,e);break;case 46===o:case 8===o:O("default")?P(-1):(k("reset",0),N());break;default:isNaN(parseInt(i,10))||(k("overwrite",parseInt(i,10)),r&&function(){var e=parseInt(O(),10);("d"===d&&e>3||"m"===d&&e>1||2===p[f[d]]&&"y"!==d||4===p[f[d]])&&P(1)}())}return!0},j=function(e){u(e.target.value)},F=function(e){var t="y"===d?"0000":"00";return t.substr(0,t.length-e.length)},N=function(e){p[f[e=e||d]]=0},D=function(){var e=["02","04","06","09","11"],t=parseInt(O(!1,"y"),10),n=O(!1,"m"),o=parseInt(O(!1,"d"),10),a=!isNaN(t)&&function(e){return 1===new Date(e,1,29).getMonth()}(t);isNaN(o)||e.indexOf(n)<0||o<29||("02"===n?o=a?29:28:o>30&&(o=30),k("overwrite",o,"d"),N("d"))},_=function(e){var t=new RegExp(" ","g");return e.replace(t,"")},P=function(e,t){var n=""!==d?f[d]+e:0+e;0!==e&&("0000"!==O()&&"00"!==O()||(k("reset"),k("overwrite",1)),N(),D()),r||2!==p[f[d]]||(p[f[d]]=0),n<0?n=0:n>2?n=2:t&&t.stopPropagation&&t.stopPropagation(),B(n)},B=function(e){var t;if(!Array.isArray(e)&&"number"!=typeof e)return console.error("invalid set to focus"),!1;t=Array.isArray(e)?e:v[e],d=y.substring(t[0],t[0]+1).toLowerCase(),h.setSelectionRange?h.setSelectionRange(t[0],t[1]):function(e,t,n){var a=o({node:e});a.setSelection(0),a.setSelection(t,n),a.setSelection({start:t,end:n}),a.getSelection()}(h,t[0],t[1])},L=function(e){e=e||S(),m=h.value=e;var t=R();u(t,function(e){return new Date(e).getTime()}(t))};return{focus:function(){s||(e.focus(),B([0,x()]))},blur:function(){s||e.blur()},destroy:function(){s?h.removeEventListener("change",j,!0):(h.removeEventListener("click",w,!0),h.removeEventListener("keydown",T,!0))},render:function(){return 8===i.length&&(function(){var e=l.length,t=x(),n=t+e,o=n+"MM".length,a=E(t);I()?(f.y=0,f.m=1,f.d=2):("M"===i.charAt(0)?(f.m=0,f.d=1):(f.d=0,f.m=1),f.y=2),v.push([0,t]),v.push([n,o]),v.push([a,g])}(),s?(h.setAttribute("min","0001-01-01"),h.setAttribute("max","9999-12-31"),h.setAttribute("data-placeholder",S()),C(h,"change",j,!0)):(h.setAttribute("onCut","return false;"),h.setAttribute("onPaste","return false;"),C(h,"click",w,!0),C(h,"keydown",T,!0)),L(),this)},value:function(e){return e?R():_(m)},setValue:L,test:{_keyBehaviour:T,_setFocusOnSubfield:P}}}}},769:function(e,t,n){"use strict";n.r(t);var o=n(50),a=n(49),r=n(10),i=n(120),l=n.n(i),c=n(2),s=n.n(c),u=n(14),d=n(1),p=n.n(d),h=n(24),m=n(55),f=!m.a.production&&window&&window.location&&window.location.search.includes("disable-animations=true"),b=n(217),g=n(5),v=n.n(g),y=n(617),C=n.n(y),k=n(122),w=n.n(k),S=n(12),E=n.n(S),O=n(73),x=n.n(O),R=n(751),I=n.n(R),A=n(108),T=n.n(A),j=n(68),F=n.n(j),N=n(196),D=n.n(N),_=n(201),P=n.n(_),B=n(620),L=n.n(B);function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.boundingClientRect,o=void 0===n?{}:n,a=t.onlyTop,r=void 0!==a&&a,i=t.offsetTop,l=void 0===i?0:i,c=t.offsetBottom,s=void 0===c?0:c;if(!e)return!1;var u=e.getBoundingClientRect(),d=o.height||window.innerHeight||document.documentElement.clientHeight,p=o.top||0,h=u.top>=p+l,m=u.bottom<=d-s;return r?h:h&&m}var z=n(38),M=n(59),H=s.a.createContext(0),W=function(e){var t=Object(c.useContext)(H),n=Object(c.useState)(t),o=l()(n,2),a=o[0],r=o[1];t!==a&&(r(t),setTimeout(e,0))},K=s.a.createContext(!1),q=u.default.div.withConfig({displayName:"CommitButton__Root",componentId:"sc-8my40k-0"})(["position:relative;"]),U=u.default.div.withConfig({displayName:"CommitButton__ButtonWrapper",componentId:"sc-8my40k-1"})(["position:absolute;-webkit-font-smoothing:antialiased;"]),Y=function(e){var t=e.backgroundColor,n=e.buttonColor,o=e.helperColor,a=e.helperText,i=e.hideIcon,l=e.label,u=e.isAnimated,d=e.onClick,p=e.isVisible,h=e.layoutItemsSize,m=e.onRequireStickyFooter,f=e.blockRef,b=e.t,g=Object(c.useRef)(null),v=Object(c.useContext)(K),y=function(){if(g.current){var e=V(g.current,h),t=!p||e;if(!e&&p){if(v)return;m(f,!0)}else t&&m(f,!1)}};W(function(){p&&y()}),Object(c.useEffect)(function(){y()},[v]);var C=s.a.createElement(q,null,s.a.createElement(U,{innerRef:g},s.a.createElement(P.a,{size:"medium",content:Object(z.a)(b(l)),color:n,contextBackgroundColor:t,helperText:!Object(r.isTouch)()&&Object(z.a)(b(a)),helperColor:o,onClick:d,iconSvg:i?null:L.a,dataQa:"ok-button".concat(p?"-visible":""," deep-purple-ok-button").concat(p?"-visible":"")})));return u?s.a.createElement(D.a,{type:"slideUp",isVisible:p,delay:0,duration:100},C):C};Y.defaultProps={backgroundColor:r.__OVERRIDE_THIS_COLOR,buttonColor:r.__OVERRIDE_THIS_COLOR,helperColor:r.__OVERRIDE_THIS_COLOR,helperText:"label.buttonHint.default",hideIcon:!1,includedInFlow:!1,isAnimated:!0,isVisible:!1,label:"label.button.ok",onRequireStickyFooter:function(){},t:function(e){return e}},Y.propTypes={backgroundColor:p.a.string,blockRef:p.a.string,buttonColor:p.a.string,className:p.a.string,helperColor:p.a.string,helperText:p.a.string,hideIcon:p.a.bool,isAnimated:p.a.bool,isVisible:p.a.bool,includedInFlow:p.a.bool,label:p.a.string,layoutItemsSize:p.a.object,onClick:p.a.func,onRequireStickyFooter:p.a.func,t:p.a.func};var G=Object(M.a)(Y),Q=n(74),X=function(e,t){return"".concat(e).concat("lg"===t?"Desktop":"Mobile")},Z=n(21),J=Object(u.keyframes)(["20%{transform:translateX(3px);}80%{transform:translateX(-3px);}"]),$=u.default.section.withConfig({displayName:"Container__Section",componentId:"sc-1blfuhz-0"})(["height:100%;width:100%;z-index:",";position:relative;animation:",";",";@media print{page-break-inside:avoid;opacity:1;}"],function(e){return e.isActive?Z.zLevels.level1:Z.zLevels.level0},function(e){return e.isShaking?"".concat(J," 0.15s cubic-bezier(0.36, 0.07, 0.19, 0.97) both infinite"):"none"},function(e){return e.isVisible?"":"visibility: hidden;"}),ee=function(e){var t=e.blockRef,n=e.isActive,o=e.isShaking,a=e.isVisible,r=e.children,i=e.dataQa,l=e.innerRef;return s.a.createElement($,x()({id:"block-".concat(t),isActive:n,isShaking:o,isVisible:a,"data-js-activable-item":!0},n&&{"data-qa-focused":!0},{"data-qa-blockref":t,"data-qa-block":!0,"data-qa":i,innerRef:l}),r)};ee.propTypes={className:p.a.string,blockRef:p.a.string,isAnswered:p.a.bool,isActive:p.a.bool,isShaking:p.a.bool,isVisible:p.a.bool,children:p.a.any,onClick:p.a.func,dataQa:p.a.string};var te=ee,ne=n(25),oe=n.n(ne),ae=n(30),re=n.n(ae),ie=n(32),le=n.n(ie),ce=n(29),se=n.n(ce),ue=n(22),de=n.n(ue),pe=n(31),he=n.n(pe),me=n(635),fe=n.n(me),be=n(150),ge=n.n(be),ve=u.default.fieldset.withConfig({displayName:"A11yContainer__Fieldset",componentId:"ejane9-0"})(["border:0;padding:0.01em 0 0;margin:0;min-width:0;"]);ve.displayName="fieldset";var ye=function(e){var t=e.children,n=e.isFieldset?ve:c.Fragment;return s.a.createElement(n,null,t)};ye.propTypes={children:p.a.any,isFieldset:p.a.bool};var Ce=ye,ke=u.default.legend.withConfig({displayName:"A11yTitle__Legend",componentId:"gex6e0-0"})(["width:1px;height:1px;overflow:hidden;display:block;"]),we=function(e){var t=e.children,n=e.id,o=e.htmlTag;return"legend"===o?s.a.createElement("span",null,s.a.createElement(ke,null,t),s.a.createElement("span",{"data-qa":"block-title deep-purple-block-title"},t)):s.a.createElement(ge.a,{type:"title",htmlTag:o,htmlFor:n,"data-qa":"block-title deep-purple-block-title"},t)};we.defaultProps={htmlTag:"span"},we.propTypes={children:p.a.any,htmlTag:p.a.string,id:p.a.string};var Se=we,Ee=u.default.div.withConfig({displayName:"ErrorMessage__ErrorWrapper",componentId:"zg4jt9-0"})(["pointer-events:none;border-radius:3px;position:absolute;padding:4px 8px;background-color:rgba(153,0,0,0.6);color:#fff;"]),Oe=function(e){var t=e.id,n=e.visible,o=e.validations,a=e.t;return null==t?null:s.a.createElement(D.a,{isVisible:n,type:"slideUp",duration:300},s.a.createElement(Ee,null,s.a.createElement(T.a,{size:"sizeN1",color:"#FFFFFF",dataQa:"error-message".concat(n?"-visible":""),useDefaultFont:!0},Object(z.a)(a(t,function(e,t){switch(e){case"label.error.minValue":return{min_value:t.minValue.minValue-1};case"label.error.maxValue":return{max_value:t.maxValue.maxValue+1};case"label.error.range":return{max_value:t.range.maxValue,min_value:t.range.minValue}}return{}}(t,o))))))};Oe.defaultProps={visible:!1,id:"label.error.required",t:function(e){return e}},Oe.propTypes={id:p.a.string,visible:p.a.bool,validations:p.a.object,t:p.a.func};var xe=Object(M.a)(Oe),Re=n(197),Ie=n(9),Ae=n(43),Te=200,je=u.default.div.withConfig({displayName:"block-structure__ButtonErrorSpace",componentId:"sc-4tm7ct-0"})(["height:48px;"]),Fe=u.default.div.withConfig({displayName:"block-structure__AttachmentWrapper",componentId:"sc-4tm7ct-1"})(["box-sizing:border-box;width:100%;display:flex;flex-direction:column;margin-top:32px;will-change:opacity;"]),Ne=u.default.div.withConfig({displayName:"block-structure__QuestionHeaderWrapper",componentId:"sc-4tm7ct-2"})(["will-change:opacity;"]),De=u.default.div.withConfig({displayName:"block-structure__Root",componentId:"sc-4tm7ct-3"})([""]),_e=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).handleAttachmentLoaded=n.handleAttachmentLoaded.bind(de()(n)),n.state={useStickyHeader:!1,maxAttachmentHeight:Te},n.calculatedAttachmentHeight=!1,n.initialAttachmentCentered=!1,n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){var e=this;this.disableStickyHeader=!0,setTimeout(function(){return e.disableStickyHeader=!1},500),this.props.handleAppScroll(function(){e.props.isActive&&e.handleLongBlock()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.isActive&&!e.isActive&&this.handleBlockDeactivated(e),!this.props.isActive&&e.isActive&&(this.disableStickyHeader=!0,setTimeout(function(){return t.disableStickyHeader=!1},500))}},{key:"componentWillUpdate",value:function(e,t){t.useStickyHeader!==this.state.useStickyHeader&&this.props.onRequireStickyHeader(t.useStickyHeader),this.calculatedAttachmentHeight||this.calculateMaxImageHeight()}},{key:"calculateMaxImageHeight",value:function(){var e=Te;this.props.attachment&&this.blockNode&&this.thisNode&&this.attachmentRef&&this.props.layoutItemsSize.boundingClientRect.height&&(e=function(e,t,n,o,a){var r=0;e===Ie.a.multipleChoice&&(r=a-95);var i=t-(n-o-r);return Math.max(i,Te)}(this.props.type,this.props.layoutItemsSize.boundingClientRect.height,this.thisNode.clientHeight,this.attachmentRef.clientHeight,this.blockNode.clientHeight),this.calculatedAttachmentHeight=!0,this.setState({maxAttachmentHeight:e}))}},{key:"handleBlockDeactivated",value:function(){this.setState({useStickyHeader:!1})}},{key:"handleLongBlock",value:function(){if(this.headerNode){var e=V(this.headerNode,v()({},this.props.layoutItemsSize,{offsetTop:this.props.isVisibleGroupStickyHeader?this.props.layoutItemsSize.groupHeaderHeight-20:0,onlyTop:!0}));e!==this.headerIsInViewport&&(this.headerIsInViewPort=e,this.setState({useStickyHeader:!this.headerIsInViewPort&&!this.disableStickyHeader}))}}},{key:"handleAttachmentLoaded",value:function(){this.props.isLivePreview&&(this.calculatedAttachmentHeight=!1),this.calculatedAttachmentHeight||this.calculateMaxImageHeight(),this.props.isFirstBlock&&!this.initialAttachmentCentered&&(this.initialAttachmentCentered=!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.attachment,o=t.children,a=t.childOfGroup,r=t.description,i=t.isActive,l=t.title,c=t.titleCounterIcon,u=t.listIndexText,d=t.theme,p=t.validations,h=t.isCommitted,m=t.isValid,f=t.hideError,b=t.validationError,g=t.customError,v=t.useFieldset,y=t.noOkButton,C=t.layoutKind,k="string"==typeof l?l:l&&l.text;return s.a.createElement(De,{innerRef:function(t){return e.thisNode=t}},s.a.createElement(Ce,{isFieldset:v},n&&"floatMobile"===C&&s.a.createElement(Fe,{innerRef:function(t){return e.attachmentRef=t}},s.a.createElement(F.a,{bottom:4},s.a.createElement(Re.a,x()({},n,{maxHeight:this.state.maxAttachmentHeight,onLoaded:this.handleAttachmentLoaded,forcePause:!i,isVisible:i})))),s.a.createElement(Ne,{innerRef:function(t){return e.headerNode=t}},s.a.createElement(fe.a,{title:s.a.createElement(Se,{id:l.for,htmlTag:l.type},Object(z.a)(k,{allowHyperlinks:!0})),titleSize:"size2",required:p&&p.required,color:d.colors&&d.colors.primary,counterIcon:a&&u?null:c,counterColor:d.colors&&d.colors.secondary,counterContent:a&&u?"".concat(u,"."):u}),r&&s.a.createElement(F.a,{top:1},s.a.createElement(ge.a,{type:"description",color:d.colors&&d.colors.primary,htmlTag:"p",dataQa:"block-description"},Object(z.a)(r,{allowHyperlinks:!0})))),n&&("stackDesktop"===C||"stackMobile"===C)&&s.a.createElement(Fe,{innerRef:function(t){return e.attachmentRef=t}},s.a.createElement(F.a,{top:4},s.a.createElement(Re.a,x()({},n,{maxHeight:this.state.maxAttachmentHeight,onLoaded:this.handleAttachmentLoaded,forcePause:!i,isVisible:i})))),s.a.createElement("div",{ref:function(t){return e.blockNode=t}},o,s.a.createElement(xe,{id:g||b,visible:(!!g||h&&!m)&&!f,validations:p}),!y&&s.a.createElement(je,null))))}}]),t}(c.Component);_e.defaultProps={validations:{},handleAppScroll:Ae.a,hideError:!1,layoutItemsSize:{},recenter:Ae.a,theme:{colors:{primary:r.__OVERRIDE_THIS_COLOR}},title:"",titleCounterIcon:"arrow",useFieldset:!1},_e.propTypes={attachment:p.a.shape({type:p.a.string,resource:p.a.shape({href:p.a.string})}),blockRef:p.a.string,children:p.a.any,childOfGroup:p.a.bool,customError:p.a.string,description:p.a.string,handleAppScroll:p.a.func,hideError:p.a.bool,isActive:p.a.bool,isAnswered:p.a.bool,scrollTo:p.a.func,type:p.a.string,isCommitted:p.a.bool,isFirstBlock:p.a.bool,isFocused:p.a.bool,isLivePreview:p.a.bool,isShaking:p.a.bool,isValid:p.a.bool,isVisible:p.a.bool,isVisibleGroupStickyHeader:p.a.bool,layoutItemsSize:p.a.shape({boundingClientRect:p.a.object,groupHeaderHeight:p.a.number}),listIndexText:p.a.string,noOkButton:p.a.bool,onRequireStickyHeader:p.a.func,recenter:p.a.func,theme:p.a.object.isRequired,title:p.a.oneOfType([p.a.string,p.a.shape({text:p.a.string,type:p.a.string,for:p.a.string})]).isRequired,titleCounterIcon:p.a.string,useFieldset:p.a.bool,validations:p.a.shape({required:p.a.bool,maxLength:p.a.number,range:p.a.shape({minValue:p.a.number,maxValue:p.a.number})}),validationError:p.a.string};var Pe=_e,Be=n(619),Le=n.n(Be),Ve=n(123),ze=n(633),Me=n.n(ze),He=function(e,t){var n=Object(c.useState)(e),o=l()(n,2),a=o[0],r=o[1],i=Object(c.useRef)(Date.now());return Object(c.useEffect)(function(){var n,o=t-(Date.now()-i.current),a=function(){Date.now()-i.current>=t&&(r(e),i.current=Date.now())};return o>0?n=setTimeout(function(){a()},o):a(),function(){clearTimeout(n)}},[e,t]),a},We=u.default.div.withConfig({displayName:"block-scroller__Root",componentId:"sc-23jz1-0"})(["width:100%;height:100%;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:auto;"]),Ke=u.default.div.withConfig({displayName:"block-scroller__CenterWrapper",componentId:"sc-23jz1-1"})(["min-height:100%;display:flex;flex-direction:column;justify-content:center;"]),qe=function(e){var t=e.children,n=e.endAutoScroll,o=e.isActive,a=e.onChangeCanSwipe,r=e.scrolling,i=Object(c.useRef)(),u=Object(c.useState)(0),d=l()(u,2),p=d[0],h=d[1],m=He(p,250),b=function(){o&&a({next:!!i.current&&i.current.scrollTop+30>=i.current.scrollHeight-i.current.clientHeight,previous:!!i.current&&i.current.scrollTop-30<=0})};return Object(c.useEffect)(b,[i.current,o]),Object(c.useEffect)(function(){if(o&&r&&"recenter"===r.scrollType&&"bottom"===r.anchor&&i.current){var e=f?0:200;Me()(i.current,"scrollTop",i.current.scrollHeight-i.current.clientHeight,e,"easeOutCubic",n)}},[r]),s.a.createElement(H.Provider,{value:m},s.a.createElement(We,{innerRef:i,onScroll:function(){i.current&&(b(),h(i.current.scrollTop))},"data-qa":"block-scroller"},s.a.createElement(Ke,null,t)))};qe.defaultProps={endAutoScroll:Ae.a,onChangeCanSwipe:Ae.a},qe.propTypes={children:p.a.node,endAutoScroll:p.a.func,isActive:p.a.bool,onChangeCanSwipe:p.a.func,scrolling:p.a.object};var Ue,Ye=qe,Ge=u.default.div.withConfig({displayName:"block-layout__Root",componentId:"sc-1r8zsy7-0"})(["display:flex;height:100%;position:relative;"]),Qe=u.default.div.withConfig({displayName:"block-layout__HalfLayout",componentId:"sc-1r8zsy7-1"})(["display:flex;height:100%;"]),Xe=u.default.div.withConfig({displayName:"block-layout__HalfSpacer",componentId:"sc-1r8zsy7-2"})(["flex:0 0 50%;"]),Ze=function(e){var t=e.scrolling,n=e.children,o=e.isActive,a=e.endAutoScroll,r=e.onChangeCanSwipe;return s.a.createElement(Ye,{isActive:o,onChangeCanSwipe:r,endAutoScroll:a,scrolling:t},s.a.createElement(Qe,null,s.a.createElement(Le.a,null,s.a.createElement(F.a,{top:6,bottom:6},n)),s.a.createElement(Xe,null)))},Je=u.default.div.withConfig({displayName:"block-layout__SplitMobileWrapper",componentId:"sc-1r8zsy7-3"})(["display:flex;flex-direction:column;height:100%;flex:1;"]),$e=u.default.div.withConfig({displayName:"block-layout__SplitMobileContentWrapper",componentId:"sc-1r8zsy7-4"})(["flex:1;"]),et=function(e){var t=e.scrolling,n=e.children,o=e.isActive,a=e.endAutoScroll,r=e.onChangeCanSwipe;return s.a.createElement(Ye,{isActive:o,onChangeCanSwipe:r,endAutoScroll:a,scrolling:t},s.a.createElement(Le.a,null,s.a.createElement(F.a,{top:6,bottom:6},n)))},tt=(Ue={},E()(Ue,Ve.a.STACK.DESKTOP,et),E()(Ue,Ve.a.STACK.MOBILE,et),E()(Ue,Ve.a.FLOAT.MOBILE,et),E()(Ue,Ve.a.FLOAT.DESKTOP,Ze),E()(Ue,Ve.a.SPLIT.DESKTOP,Ze),E()(Ue,Ve.a.SPLIT.MOBILE,function(e){var t=e.attachment,n=e.scrolling,o=e.children,a=e.isActive,r=e.endAutoScroll,i=e.onChangeCanSwipe,l=e.layoutItemsSize;return s.a.createElement(Ye,{isActive:a,onChangeCanSwipe:i,scrolling:n,endAutoScroll:r},s.a.createElement(Je,null,s.a.createElement(Re.a,x()({maxHeight:.3*l.boundingClientRect.height,cover:!0},t)),s.a.createElement($e,null,s.a.createElement(Le.a,null,s.a.createElement(F.a,{top:6,bottom:6},o)),s.a.createElement(Xe,null))))}),E()(Ue,Ve.a.WALLPAPER.DESKTOP,et),E()(Ue,Ve.a.WALLPAPER.MOBILE,et),Ue),nt=function(e){var t=tt[e.layoutKind]||et;return s.a.createElement(Ge,null,s.a.createElement(t,e,e.children))};nt.defaultProps={endAutoScroll:Ae.a,onChangeCanSwipe:Ae.a,layoutItemsSize:{boundingClientRect:{height:0}}},nt.propTypes={children:p.a.node,endAutoScroll:p.a.func,isActive:p.a.bool,onChangeCanSwipe:p.a.func,scrolling:p.a.object,layoutItemsSize:p.a.object};var ot=nt,at=function(e){var t=e.children,n=e.blockRef,o=e.attachment,a=e.layout,r=e.isAnswered,i=e.isActive,l=e.type,c=e.isVisible,u=e.isShaking,d=e.goToNextBlock,p=e.goToPreviousBlock,h=e.scrolling,m=e.theme,f=e.onChangeCanSwipe,b=e.endAutoScroll,g=e.layoutItemsSize,v=Object(Q.useBreakpoint)(),y=X(a.type,v);return s.a.createElement(te,{isActive:i,isVisible:c,isAnswered:r,isShaking:i&&u,blockRef:n,dataQa:"blocktype-".concat(l," deep-purple-blocktype-").concat(l)},s.a.createElement(ot,{theme:m,attachment:o,scrolling:h,goToNextBlock:d,goToPreviousBlock:p,layoutKind:y,isActive:i,onChangeCanSwipe:f,endAutoScroll:b,layoutItemsSize:g},s.a.createElement(Pe,x()({},e,{layoutKind:y}),t)))};at.defaultProps={layout:{type:"stack"}},at.propTypes={theme:p.a.object,scrolling:p.a.object,children:p.a.node,layout:p.a.shape({type:p.a.string,attachment:p.a.object}),attachment:p.a.shape({type:p.a.string,resource:p.a.shape({href:p.a.string})}),blockRef:p.a.string,isAnswered:p.a.bool,isActive:p.a.bool,type:p.a.string,isVisible:p.a.bool,isShaking:p.a.bool,goToNextBlock:p.a.func,goToPreviousBlock:p.a.func,onChangeCanSwipe:p.a.func,endAutoScroll:p.a.func};var rt=at,it=n(97);function lt(e,t){return e.keyCode===it.a.ARUP&&0!==t}function ct(e,t,n){return e.keyCode===it.a.ARDOWN&&t!==n.value.length}function st(e){return e.keyCode===it.a.ENTER||e.which===it.a.ENTER}var ut=function(e,t,n){return Ie.a.number!==e||function(e){return(e.ctrlKey||e.metaKey)&&("v"===e.key||"c"===e.key||"z"===e.key)}(n)||st(n)||function(e){var t=e.which;return it.a.NUM_0<=t&&t<=it.a.NUM_9}(n)?e===Ie.a.shortText&&t.maxLength&&t.maxLength<=n.target.value.length&&!st(n)?(n.preventDefault(),{blocked:!0}):e===Ie.a.longText&&t.maxLength&&t.maxLength<=n.target.value.length&&!st(n)?(n.preventDefault(),{blocked:!0}):{blocked:!1}:(n.preventDefault(),{blocked:!0})},dt=function(e,t){var n=function(e,t,n){var o=n&&n.selectionStart;return void 0!==o&&e.some(function(e){return e(t,o,n)})}([lt,ct,st],t.nativeEvent,t.target);Ie.a.number===e&&function(e){return e.key===it.a.DEAD||e.keyIdentifier===it.a.UNIDENTIFIED}(t)&&t.preventDefault(),n&&t.stopPropagation()},pt="center",ht="bottom",mt=n(147),ft=function(e,t){return e.isActive||t.isActive||e.isCommitted!==t.isCommitted||e.layoutItemsSize!==t.layoutItemsSize},bt=function(e,t){return!ft(e,t)},gt=550;var vt=function(e,t,n){var o=function(e){return"undefined"!=typeof window&&"undefined"!=typeof document&&document.activeElement===e}(e),a=function(){!o&&t&&e&&!Object(r.isTouch)()&&V(e,n)&&e.focus()};return Object(c.useEffect)(function(){setTimeout(a,gt)},[e,n,t]),W(a),o},yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(c.useState)(t),o=l()(n,2),a=o[0],r=o[1],i=Object(c.useRef)();return[a,function(t){r(t),clearTimeout(i.current),t&&(i.current=setTimeout(function(){return r(!1)},e))}]},Ct=700,kt=function(e){var t=e.blockRef,n=e.isActive,o=e.isCommitButtonVisible,a=e.isFocused,i=e.layoutItemsSize,u=e.maxLength,d=e.onCommitAnswer,p=e.onInputBlur,h=e.onInputFocus,m=e.onRequireStickyFooter,f=e.onStageAnswer,b=e.placeholder,g=e.recenter,y=e.t,C=e.theme,k=e.title,w=e.type,S=e.validations,E=yt(600),O=l()(E,2),R=O[0],A=O[1],j=Object(c.useState)(),N=l()(j,2),D=N[0],_=N[1],P=vt(D,a,i),B="stkv-text-".concat(t);function L(e){var o=e.target.value;n&&f(t,o.slice(0,u))}var V=e.value.length>0?e.value[0]:"",M=v()({},e,{title:{text:k,for:B,type:"label"}});return s.a.createElement(rt,x()({isShaking:R},M),s.a.createElement(F.a,{top:4,bottom:2},s.a.createElement(I.a,{placeholder:y(b),maxLength:S.maxLength,onChange:L,onResize:function(e){L(e),n&&!Object(mt.a)()&&g(ht,pt,!0)},onKeyDown:function(e){var o=!!e.shiftKey;dt(w,e),Object(r.isTouch)()||e.nativeEvent.keyCode!==it.a.ENTER||o||(D&&D.blur(),e.stopPropagation(),n&&d(t))},onKeyPress:function(e){ut(w,S,e).blocked&&A(!0)},onFocus:function(){Object(r.isTouch)()&&(h(),Object(mt.a)()||setTimeout(function(){g(ht)},Ct))},onBlur:p,innerRef:_,id:B,value:V,color:C.colors.secondary}),!Object(r.isTouch)()&&s.a.createElement(F.a,{top:2},s.a.createElement(T.a,{color:C.colors.secondary,fontWeight:"regular",htmlTag:"p",size:"sizeN2"},Object(z.a)(y("block.longText.hint"))))),s.a.createElement(G,{buttonColor:C.colors.button,helperColor:C.colors.primary,backgroundColor:C.colors.background,onRequireStickyFooter:m,blockRef:t,onClick:function(e){var o=P&&Object(r.isTouch)();D&&o&&D.blur(),e.stopPropagation(),setTimeout(function(){n&&d(t)},o?Ct:0)},isVisible:o,layoutItemsSize:i}))};kt.defaultProps={onCommitAnswer:Ae.a,onStageAnswer:Ae.a,recenter:Ae.a,t:Ae.a,theme:{colors:{backgroundColor:r.__OVERRIDE_THIS_COLOR,button:r.__OVERRIDE_THIS_COLOR,primary:r.__OVERRIDE_THIS_COLOR,secondary:r.__OVERRIDE_THIS_COLOR}},validations:{maxLength:null},value:[]},kt.propTypes={blockRef:p.a.string.isRequired,handleAppScroll:p.a.func,index:p.a.number,isActive:p.a.bool,isCommitButtonVisible:p.a.bool,isFocused:p.a.bool,layoutItemsSize:p.a.object,maxLength:p.a.number,onCommitAnswer:p.a.func,onInputBlur:p.a.func,onInputFocus:p.a.func,onRequireStickyFooter:p.a.func,onStageAnswer:p.a.func,placeholder:p.a.string,recenter:p.a.func,t:p.a.func,theme:p.a.object,title:p.a.string,type:p.a.string,validations:p.a.shape({maxLength:p.a.number}),value:p.a.arrayOf(p.a.string)};var wt=Object(c.memo)(kt,bt),St=n(616),Et=n.n(St),Ot=n(733),xt=n.n(Ot),Rt=function(e){function t(){var e;return oe()(this,t),(e=le()(this,se()(t).call(this))).handleFocus=e.handleFocus.bind(de()(e)),e.handleBlur=e.handleBlur.bind(de()(e)),e.handleRef=e.handleRef.bind(de()(e)),e.dateFieldFactory=xt()(),e.dateFieldInstance=null,e}return he()(t,e),re()(t,[{key:"enhanceInputWithDateLogic",value:function(){this.dateFieldInstance&&this.dateFieldInstance.destroy(),this.dateFieldInstance=null;var e=this.props,t=e.separator,n=e.structure,o=e.placeholder,a=e.onChange,r=this.dateFieldFactory(this.input,n,t,o,!1,function(e){return a({target:{value:e}})});this.dateFieldInstance=r.render()}},{key:"handleFocus",value:function(){this.dateFieldInstance.focus()}},{key:"handleBlur",value:function(){this.dateFieldInstance.blur()}},{key:"handleRef",value:function(e){this.input=e,this.props.getInputRef(e)}},{key:"componentDidMount",value:function(){this.enhanceInputWithDateLogic()}},{key:"componentDidUpdate",value:function(e){var t=e.separator!==this.props.separator,n=e.structure!==this.props.structure;(t||n||this.props.resetValue)&&this.enhanceInputWithDateLogic()}},{key:"render",value:function(){var e=this.props,t=e.color,n=e.inputId,o=e.onChange,a=e.onKeyDown,r=e.onKeyPress,i=e.placeholder,l=e.value;return s.a.createElement(Et.a,{value:l,inputId:n,color:t,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:o,onKeyDown:a,onKeyPress:r,placeholder:i,getRef:this.handleRef,type:"text"})}}]),t}(c.Component);Rt.propTypes={inputId:p.a.string,onChange:p.a.func,onKeyDown:p.a.func,onKeyPress:p.a.func,placeholder:p.a.string,structure:p.a.string,separator:p.a.string,value:p.a.string,getInputRef:p.a.func,resetValue:p.a.bool,color:p.a.string},Rt.defaultProps={onChange:Ae.a,onKeyDown:Ae.a,onKeyPress:Ae.a};var It=Rt,At=u.default.div.withConfig({displayName:"DateBlock__InputWrapper",componentId:"trp8gr-0"})(["position:relative;"]),Tt=u.default.input.withConfig({displayName:"DateBlock__GhostInput",componentId:"trp8gr-1"})(["position:absolute;width:100%;height:100%;top:0;opacity:0;min-width:100%;"]),jt={MMDDYYYY:"MM-DD-YYYY",DDMMYYYY:"DD-MM-YYYY",YYYYMMDD:"YYYY-MM-DD"},Ft={DD:"block.date.placeholder.day",MM:"block.date.placeholder.month",YYYY:"block.date.placeholder.year"},Nt=function(e,t,n){var o=jt[e];return e&&t&&o?o.replace(/-/g,t).split(t).map(function(e){return n(Ft[e])}).join(t):""},Dt=function(e){function t(){var e,n;oe()(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];var i=(n=le()(this,(e=se()(t)).call.apply(e,[this].concat(a)))).props,l=i.blockRef,c=i.structure,s=i.separator,u=i.t;return n.handleCommit=n.handleCommit.bind(de()(n)),n.handleChange=n.handleChange.bind(de()(n)),n.handleFocus=n.handleFocus.bind(de()(n)),n.handleBlur=n.handleBlur.bind(de()(n)),n.handleKeyDown=n.handleKeyDown.bind(de()(n)),n.inputId="stkv-text-".concat(l),n.state={isGhostInputFocused:!1,placeholder:Nt(c,s,u)},n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){var e=this;this.updateInputFocus(this.dateInput,this.props.isFocused),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.dateInput,e.props.isFocused)})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.structure,o=t.separator,a=t.t;e.structure===n&&e.separator===o||this.setState({placeholder:Nt(e.structure,e.separator,a)})}},{key:"shouldComponentUpdate",value:function(e){return ft(this.props,e)}},{key:"componentDidUpdate",value:function(){this.updateInputFocus(this.dateInput,this.props.isFocused)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case it.a.ARDOWN:case it.a.ARUP:e.stopPropagation();break;case it.a.ENTER:this.handleCommit(e)}}},{key:"handleCommit",value:function(e){e.stopPropagation(),this.props.isActive&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"handleChange",value:function(e){var t=this,n=e.target.value,o=n.replace(/[.-/]/gi,"");this.props.isActive&&this.props.onStageAnswer(this.props.blockRef,o.match(/[0-9]/gi)?n:""),Object(r.isTouch)()&&!Object(mt.a)()&&n&&setTimeout(function(){t.props.isActive&&t.props.onCommitAnswer(t.props.blockRef),t.ghostInput.blur()},gt)}},{key:"handleFocus",value:function(){Object(mt.a)()&&(this.setState({isGhostInputFocused:!0}),this.props.onInputFocus())}},{key:"handleBlur",value:function(){Object(mt.a)()&&(this.setState({isGhostInputFocused:!1}),this.props.onInputBlur())}},{key:"updateInputFocus",value:function(e,t){!Object(r.isTouch)()&&t&&V(e,this.props.layoutItemsSize)&&e.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isCommitButtonVisible,o=t.isFocused,a=t.structure,i=t.separator,l=t.value,c=void 0===l?[]:l,u=t.title,d=t.theme,p=t.t,h=t.onRequireStickyFooter,m=v()({},this.props,{title:{text:u,for:this.inputId,type:"label"}}),f=this.state.placeholder,b=function(e,t,n){if(!e||!e[0])return"";var o=e[0].split("-");return t.replace(n(Ft.YYYY),o[0]).replace(n(Ft.MM),o[1]).replace(n(Ft.DD),o[2])}(c,f,p),g=Object(mt.a)()&&this.state.isGhostInputFocused;return s.a.createElement(rt,m,s.a.createElement(F.a,{top:4,bottom:2},Object(r.isTouch)()?s.a.createElement(At,null,s.a.createElement(Et.a,{placeholder:f,color:d.colors.secondary,value:b,onChange:Ae.a}),s.a.createElement(Tt,{type:"date",innerRef:function(t){return e.ghostInput=t},onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange})):s.a.createElement(It,{getInputRef:function(t){return e.dateInput=t},color:d.colors.secondary,placeholder:f,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,inputId:this.inputId,isFocused:o,structure:a,separator:i,resetValue:this.props.shouldClearInput})),s.a.createElement(G,{buttonColor:d.colors.button,helperColor:d.colors.primary,backgroundColor:d.colors.background,onRequireStickyFooter:h,blockRef:this.props.blockRef,onClick:this.handleCommit,isVisible:n&&!g,layoutItemsSize:this.props.layoutItemsSize}))}}]),t}(c.Component);Dt.defaultProps={onCommitAnswer:Ae.a,onInputBlur:Ae.a,onInputFocus:Ae.a,onKeyDown:Ae.a,onKeyPress:Ae.a,onRequireStickyFooter:Ae.a,onStageAnswer:Ae.a,theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR}},t:Ae.a},Dt.propTypes={blockRef:p.a.string,handleAppScroll:p.a.func,index:p.a.number,isActive:p.a.bool,isCommitButtonVisible:p.a.bool,isFocused:p.a.bool,layoutItemsSize:p.a.object,onCommitAnswer:p.a.func,onInputFocus:p.a.func,onInputBlur:p.a.func,onKeyDown:p.a.func,onKeyPress:p.a.func,onRequireStickyFooter:p.a.func,onStageAnswer:p.a.func,placeholder:p.a.string,value:p.a.arrayOf(p.a.string),separator:p.a.string,shouldClearInput:p.a.bool,structure:p.a.string,t:p.a.func,theme:p.a.object,title:p.a.string};var _t=n(34),Pt=n.n(_t),Bt=u.default.div.withConfig({displayName:"TopDownFocusable__Focusable",componentId:"w6x6xw-0"})(["outline:none;min-height:1px;margin-top:-1px;"]),Lt=function(e){function t(){return oe()(this,t),le()(this,se()(t).apply(this,arguments))}return he()(t,e),re()(t,[{key:"tryFocus",value:function(){var e=this.topFocusableRef&&this.bottomFocusableRef&&this.focusableRef,t=document.activeElement===this.focusableRef||document.activeElement===this.topFocusableRef||document.activeElement===this.bottomFocusableRef,n=V(this.topFocusableRef,v()({},this.props.layoutItemsSize)),o=V(this.bottomFocusableRef,v()({},this.props.layoutItemsSize));return!!t||!!e&&(n?(this.topFocusableRef.focus(),!0):!!o&&(this.bottomFocusableRef.focus(),!0))}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.tryFocus()},600)}},{key:"componentDidUpdate",value:function(){var e=this;this.props.shouldFocus&&(this.tryFocus()||setTimeout(function(){return e.tryFocus()},600))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onKeyDown,o=t.children;return s.a.createElement(Bt,{tabIndex:"-1",innerRef:function(t){return e.focusableRef=t},onKeyDown:n,"data-qa":"focusable"},s.a.createElement(Bt,{tabIndex:"-1",innerRef:function(t){return e.topFocusableRef=t}}),o,s.a.createElement(Bt,{tabIndex:"-1",innerRef:function(t){return e.bottomFocusableRef=t}}))}}]),t}(c.Component);Lt.propTypes={children:p.a.any,shouldFocus:p.a.bool,onKeyDown:p.a.func,layoutItemsSize:p.a.object};var Vt=Lt,zt=function(e){var t=e.color;return s.a.createElement("svg",{height:"50px",width:"50px",viewBox:"0 0 50 50"},s.a.createElement("g",{fill:t,fillRule:"nonzero"},s.a.createElement("path",{d:"M25 0a25 25 0 1 0 0 50 25 25 0 0 0 0-50zm0 46a21 21 0 1 1 0-42 21 21 0 0 1 0 42z"}),s.a.createElement("path",{d:"M35 23h-8v-8h-4v8h-8v4h8v8h4v-8h8v-4z"})))},Mt=Object(u.keyframes)(["from{opacity:0;}to{opacity:1;}"]),Ht=u.default.div.withConfig({displayName:"DropArea__Root",componentId:"sc-1htx8qv-0"})(["position:fixed;top:","px;left:","px;height:","px;width:","px;display:flex;align-items:center;justify-content:center;z-index:",";overflow:hidden;"],function(e){return e.boundingClientRect.top},function(e){return e.boundingClientRect.left},function(e){return e.boundingClientRect.height},function(e){return e.boundingClientRect.width},Z.zLevels.level5),Wt=u.default.div.withConfig({displayName:"DropArea__TextWrapper",componentId:"sc-1htx8qv-1"})(["position:relative;animation:"," 0.8s ease forwards;display:flex;flex-direction:column;align-items:center;pointer-events:none;"],Mt),Kt=Object(u.keyframes)(["from{transform:translateX(-50%) translateY(-50%) scale(0);opacity:1;}to{transform:translateX(-50%) translateY(-50%) scale(1);opacity:0.8;}"]),qt=u.default.div.withConfig({displayName:"DropArea__Circle",componentId:"sc-1htx8qv-2"})(["position:absolute;pointer-events:none;top:","px;left:","px;width:","px;height:","px;&::before{content:'';width:100%;height:100%;transform-origin:50% 50%;position:absolute;border-radius:50%;background:",";animation:"," 0.8s cubic-bezier(0.165,0.84,0.44,1) forwards 0.02s;opacity:0;}"],function(e){return e.posY},function(e){return e.posX},function(e){return e.size},function(e){return e.size},function(e){return e.color},Kt),Ut=function(e){function t(){var e;return oe()(this,t),(e=le()(this,se()(t).call(this))).state={dragging:!1,showCircle:!1,circlePos:{x:0,y:0}},e.handleGlobalDragEnter=e.handleGlobalDragEnter.bind(de()(e)),e.handleDrop=e.handleDrop.bind(de()(e)),e.handleDragLeave=e.handleDragLeave.bind(de()(e)),e.handleDragOver=e.handleDragOver.bind(de()(e)),e}return he()(t,e),re()(t,[{key:"handleGlobalDragEnter",value:function(e){var t=this;this.props.active&&(e.preventDefault(),this.setState({dragging:!0}),clearTimeout(this.danglingDragRemoveTimeout),this.danglingDragRemoveTimeout=setTimeout(function(){return t.clearState()},3e3))}},{key:"componentDidMount",value:function(){document.addEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"clearState",value:function(){this.setState({dragging:!1,showCircle:!1,circlePos:{x:0,y:0}})}},{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.clearState(),this.props.active&&this.props.onDrop(e)}},{key:"handleDragLeave",value:function(e){e.preventDefault(),this.clearState()}},{key:"handleDragOver",value:function(e){clearTimeout(this.danglingDragRemoveTimeout),e.preventDefault(),e.stopPropagation(),!1===this.state.showCircle&&this.setState({showCircle:!0,circlePos:{x:e.clientX-this.props.boundingClientRect.left,y:e.clientY-this.props.boundingClientRect.top}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,o=t.textColor,a=t.backgroundColor,r=t.boundingClientRect;return n&&this.state.dragging?s.a.createElement(Ht,{onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,boundingClientRect:r},this.state.showCircle&&s.a.createElement(Q.ResponsiveConsumer,null,function(t){var n=t.width,o=t.height;return s.a.createElement(qt,{size:2*Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),posX:e.state.circlePos.x,posY:e.state.circlePos.y,color:a})}),s.a.createElement(Wt,null,s.a.createElement(zt,{color:o}),s.a.createElement(F.a,{top:2},s.a.createElement(T.a,{size:"sizeN1",fontWeight:"bold",color:o},this.props.dropText)))):null}}]),t}(c.PureComponent);Ut.defaultProps={onDrop:function(){},textColor:"#FFFFFF",backgroundColor:"#000000",dropText:""},Ut.propTypes={onDrop:p.a.func,active:p.a.bool,textColor:p.a.string,backgroundColor:p.a.string,dropText:p.a.string,boundingClientRect:p.a.object};var Yt=Ut,Gt=function(e){var t=e.color;return s.a.createElement("svg",{style:{display:"block"},width:"92px",height:"68px",viewBox:"0 0 92 68"},s.a.createElement("path",{d:"M46 .64a27.9 27.9 0 0 1 19.78 8.19 27.78 27.78 0 0 1 8.03 20A19.95 19.95 0 0 1 92 48.63c0 11.04-8.97 20-20 20H23c-12.67 0-23-10.33-23-23a22.94 22.94 0 0 1 18.63-22.46 27.79 27.79 0 0 1 7.56-14.34A27.97 27.97 0 0 1 46 .63zm0 6c-5.64 0-11.26 2.1-15.56 6.4-3.66 3.66-5.96 10.59-6.51 15.34 0 .06.2.06-2.5.32A17.02 17.02 0 0 0 6 45.64c0 9.42 7.58 17 17 17h49c7.8 0 14-6.2 14-14 0-7.81-6.2-14-14-14H67.12v-3.36c0-10.7-1.43-14.1-5.59-18.24-4.32-4.3-9.9-6.4-15.53-6.4z",fill:t,fillRule:"nonzero"}))},Qt=function(e){var t=e.color;return s.a.createElement("svg",{width:"26px",height:"60px",viewBox:"0 0 26 31"},s.a.createElement("path",{d:"M13 .53l-2.03 1.89-11 10 4.06 4.44L10 11.42v19.22h6V11.42l5.97 5.44c.03.02 4.06-4.44 4.06-4.44l-11-10c-.4-.36-1.07-1-2.03-1.9z",fill:t,fillRule:"nonzero"}))},Xt=Object(u.keyframes)(["from{transform:translateY(0%);}to{transform:translateY(-60px);}"]),Zt=u.default.div.withConfig({displayName:"cloud-upload-icon__Root",componentId:"tj7qoc-0"})(["position:relative;"]),Jt=u.default.div.withConfig({displayName:"cloud-upload-icon__ArrowWrapper",componentId:"tj7qoc-1"})(["",";display:flex;flex-direction:column;"],function(e){return e.animated?"\n  animation: ".concat(Xt," 1.2s cubic-bezier(0.68, 0.27, 0.36, 0.77) infinite;\n  "):""}),$t=u.default.div.withConfig({displayName:"cloud-upload-icon__ArrowClipper",componentId:"tj7qoc-2"})(["top:0;left:0;position:absolute;overflow:hidden;border-radius:10px 10px 0 0;left:32px;top:2px;bottom:2px;"]),en=function(e){var t=e.color,n=e.dimmed,o=e.animated;return n&&(t=Object(r.xxtransparent)(t)),s.a.createElement(Zt,null,s.a.createElement(Gt,{color:t}),s.a.createElement($t,null,s.a.createElement(Jt,{animated:o},s.a.createElement(Qt,{color:t}),s.a.createElement(Qt,{color:t}))))},tn=n(731),nn=n.n(tn),on=n(109),an=n.n(on),rn=function(e){var t=e.color;return s.a.createElement("svg",{width:"57px",heifht:"69px",viewBox:"0 0 57 69"},s.a.createElement("path",{d:"M36.7 0H0v69h57V20L36.7 0zM38 7.9L49 18.5H38V7.8zM4.7 64.4V4.6h28.8v18.6h18.9v41.2H4.7z",fill:t,fillRule:"nonzero"}))},ln=Object(u.keyframes)(["from{transform:scale(0.7);opacity:0.01;}to{transform:scale(1);opacity:1;}"]),cn=Object(u.keyframes)(["from{transform:scale(1);opacity:1;}to{transform:scale(0.7);opacity:0.01;}"]),sn=u.default.div.withConfig({displayName:"uploaded-file-preview__UnknownFileExtensionPlaceholderWrapper",componentId:"mx06qv-0"})(["height:200px;width:",";display:flex;align-items:center;justify-content:center;background:",";"],function(e){return e.fullWidth?"100%":"200px"},function(e){return Object(r.xxtransparent)(e.color)}),un=u.default.div.withConfig({displayName:"uploaded-file-preview__FilePreviewWrapper",componentId:"mx06qv-1"})(["width:",";margin:",";display:flex;align-items:center;flex-direction:column;max-width:100%;transition:all 0.2s ease;",";"],function(e){return e.fullWidth?"100%":"auto"},function(e){return e.fullWidth?"none":"0 20px"},function(e){return"\n  animation: ".concat(e.visible?ln:cn," 0.2s ease forwards;")}),dn=u.default.div.withConfig({displayName:"uploaded-file-preview__FilePreview",componentId:"mx06qv-2"})(["border:1px solid ",";border-bottom:none;border-radius:3px 3px 0 0;width:100%;"],function(e){return e.color}),pn=u.default.div.withConfig({displayName:"uploaded-file-preview__FileFooter",componentId:"mx06qv-3"})(["border:1px solid ",";border-radius:0 0 3px 3px;width:100%;padding:6px 12px;"],function(e){return e.color}),hn=u.default.img.withConfig({displayName:"uploaded-file-preview__ImagePreview",componentId:"mx06qv-4"})(["height:",";width:",";display:block;max-width:100%;object-fit:cover;"],function(e){return e.fullWidth?"auto":"200px"},function(e){return e.fullWidth?"100%":"auto"}),mn=u.default.div.withConfig({displayName:"uploaded-file-preview__FileNameDeleteWrapper",componentId:"mx06qv-5"})(["display:flex;justify-content:space-between;"]),fn=u.default.div.withConfig({displayName:"uploaded-file-preview__DeleteFileWrapper",componentId:"mx06qv-6"})(["cursor:pointer;display:flex;align-items:center;justify-content:center;"]),bn=u.default.div.withConfig({displayName:"uploaded-file-preview__FileNameWrapper",componentId:"mx06qv-7"})(["width:1px;min-width:1px;flex:1;display:flex;align-items:center;"]),gn=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).state={visible:!0},n.handleCancel=n.handleCancel.bind(de()(n)),n}return he()(t,e),re()(t,[{key:"handleCancel",value:function(){this.setState({visible:!1}),setTimeout(this.props.onCancel,200)}},{key:"render",value:function(){var e=function(e){var t=e.split("."),n=t.pop();return[t.join("."),n]}(this.props.originalFileName),t=l()(e,2),n=t[0],o=t[1];return s.a.createElement(un,{visible:this.state.visible,fullWidth:"sm"===this.props.breakpoint},s.a.createElement(dn,{color:this.props.theme.colors.secondary},null!=this.props.fileBlob?s.a.createElement(hn,{fullWidth:"sm"===this.props.breakpoint,src:this.props.fileBlob,alt:"Uploaded image"}):s.a.createElement(sn,{fullWidth:"sm"===this.props.breakpoint,color:this.props.theme.colors.secondary},s.a.createElement(rn,{color:this.props.theme.colors.secondary}))),s.a.createElement(pn,{color:this.props.theme.colors.secondary},s.a.createElement(mn,null,s.a.createElement(bn,null,s.a.createElement(T.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary,ellipsis:!0},n,"."),s.a.createElement(T.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary},o)),s.a.createElement(F.a,{left:1}),s.a.createElement(fn,{onClick:this.handleCancel},s.a.createElement(an.a,{svg:nn.a,color:this.props.theme.colors.primary})))))}}]),t}(c.PureComponent);function vn(e){return new Promise(function(t,n){var o=new window.FileReader;o.onload=function(e){return t(e.target.result)},o.onerror=n,o.readAsDataURL(e)})}var yn=["image/png","image/gif","image/jpeg","image/svg+xml"],Cn=function(e){return e.replace(/(<([^>]+)>)/gi,"")},kn=function(e){return yn.some(function(t){return e===t})},wn=n(121),Sn=n.n(wn),En=n(730),On=n.n(En),xn=n(296),Rn=n.n(xn),In=n(152),An="UPLOADING",Tn="PREVIEW",jn="INPUT",Fn=u.default.input.withConfig({displayName:"FileUpload__FileInput",componentId:"sc-18jtzv9-0"})(["position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);"]),Nn=u.default.label.withConfig({displayName:"FileUpload__InputLabel",componentId:"sc-18jtzv9-1"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;cursor:pointer;"]),Dn=u.default.div.withConfig({displayName:"FileUpload__Wrapper",componentId:"sc-18jtzv9-2"})(["border:",";background:",";height:",";border-radius:3px;display:flex;align-items:center;justify-content:center;position:relative;transition:background 0.1s ease;"],function(e){return e.visible?"1px dashed ".concat(e.color):"none"},function(e){return e.hovered?Object(r.xxtransparent)(e.color):Object(r.xxxtransparent)(e.color)},function(e){return e.visible?"300px":"auto"}),_n=function(e){var t=e.t,n=e.uploadProgress,o=e.theme;return s.a.createElement(Sn.a,{vertical:!0,align:"center"},s.a.createElement(en,{color:o.colors.secondary,animated:!0}),s.a.createElement(F.a,{top:2}),s.a.createElement(On.a,{value:n,color:o.colors.secondary}),s.a.createElement(F.a,{top:1}),s.a.createElement(T.a,{size:"sizeN1",align:"center",color:o.colors.primary},t("block.fileUpload.uploading")))},Pn=function(e){var t=e.t,n=e.inputId,o=e.theme,a=e.handleChange;return s.a.createElement(Nn,{htmlFor:n},s.a.createElement(Sn.a,{vertical:!0,align:"center"},s.a.createElement(en,{color:o.colors.secondary,dimmed:!0}),s.a.createElement(F.a,{top:2}),s.a.createElement("div",null,s.a.createElement(T.a,{size:"sizeN1",fontWeight:"bold",color:o.colors.secondary,inline:!0},Cn(t("block.fileUpload.choose"))," "),!Object(r.isTouch)()&&s.a.createElement(T.a,{size:"sizeN1",color:o.colors.primary,inline:!0},Cn(t("block.fileUpload.drag")))),s.a.createElement(F.a,{top:1}),s.a.createElement(T.a,{size:"sizeN2",align:"center",color:o.colors.primary},t("block.fileUpload.hintSize"))),s.a.createElement(Fn,{type:"file",id:n,onChange:a}))},Bn=function(e){var t=e.t,n=e.phase,o=e.uploadProgress,a=e.theme,r=e.handleChange,i=e.blockRef,l=e.originalFileName,c=e.fileBlob,u=e.handleCancel,d=e.breakpoint;return n===An?s.a.createElement(_n,{t:t,uploadProgress:o,theme:a}):n===jn?s.a.createElement(Pn,{t:t,theme:a,handleChange:r,inputId:"stkv-text-".concat(i)}):n===Tn?s.a.createElement(gn,{theme:a,originalFileName:l,fileBlob:c,onCancel:u,breakpoint:d}):void 0},Ln=function(e){var t=e.t,n=e.breakpoint,o=e.theme,a=e.layoutItemsSize,r=e.isFocused,i=e.onRequireStickyFooter,u=e.isActive,d=e.onCommitAnswer,p=e.blockRef,h=e.isCommitButtonVisible,m=e.onStageAnswer,f=e.value,b=Object(c.useState)(),g=l()(b,2),v=g[0],y=g[1],C=Object(c.useState)(!1),k=l()(C,2),w=k[0],S=k[1],E=Object(c.useState)(0),O=l()(E,2),R=O[0],I=O[1],A=f&&f.length>0?f[0]:void 0,T=w?An:A?Tn:jn,j=function(){m(p,null)},N=function(e){var t=e.target.files;t.length&&B(t[0])},D=function(e){I(e)},_=function(e){m(p,{value:e,label:e.name}),S(!1)},P=function(e){S(!1);var t=e&&e.message;y("file-size-exceeded"===t?"label.error.sizeLimit":"label.error.upload")},B=function(){var e=Pt()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),P(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),L=function(){var t=Pt()(regeneratorRuntime.mark(function t(n){var o,a,r,i,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),I(0),y(null),o=e.formId,a=e.id,t.next=6,Object(In.b)(o,a);case 6:if(r=t.sent,!(n.size>r.maxSize)){t.next=9;break}throw new Error("file-size-exceeded");case 9:return t.next=11,Object(In.e)(n,r,D);case 11:if(i=t.sent,!kn(n.type)){t.next=18;break}return t.next=15,vn(n);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=null;case 19:l=t.t0,_({name:n.name,type:n.type,s3Filename:i,blob:l});case 21:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return s.a.createElement(rt,x()({},e,{customError:v}),s.a.createElement(F.a,{top:4,bottom:2},s.a.createElement(Vt,{shouldFocus:r,layoutItemsSize:a,"data-qa":"focusable"},s.a.createElement(Rn.a,null,function(e){var a=e.hovered;return s.a.createElement(Dn,{visible:"sm"!==n||T!==Tn,color:o.colors.secondary,hovered:a&&T===jn},s.a.createElement(Bn,{t:t,phase:T,uploadProgress:R,theme:o,handleChange:N,blockRef:p,originalFileName:A&&A.name,fileBlob:A&&A.blob,handleCancel:j,breakpoint:n}))}),s.a.createElement(Yt,{textColor:o.colors.background,backgroundColor:o.colors.secondary,boundingClientRect:a.boundingClientRect,active:u&&T===jn,onDrop:function(e){var t=e.dataTransfer.files;B(t[0])},dropText:t("block.fileUpload.dropFiles")}))),s.a.createElement(G,{buttonColor:o.colors.button,helperColor:o.colors.primary,backgroundColor:o.colors.background,onRequireStickyFooter:i,blockRef:p,isVisible:h,onClick:function(e){e.stopPropagation(),u&&d(p)},layoutItemsSize:a}))};Ln.defaultProps={file:{},onCommitAnswer:Ae.a,onStageAnswer:Ae.a,t:function(e){return e},theme:{colors:{primary:"#FF00FF",secondary:"#FF00FF"}},breakpoint:"md"},Ln.propTypes={blockRef:p.a.string,breakpoint:p.a.string,isCommitButtonVisible:p.a.bool,isActive:p.a.bool,onCommitAnswer:p.a.func,onStageAnswer:p.a.func,t:p.a.func,shouldClearInput:p.a.bool,layoutItemsSize:p.a.object,theme:p.a.object};var Vn=Object(Q.withBreakpoint)(Ln),zn=n(93),Mn=n.n(zn),Hn=n(727),Wn=n.n(Hn),Kn=n(721),qn=n.n(Kn),Un=n(720),Yn=n.n(Un),Gn=function(e){var t=e.color,n=e.maxSelection,o=e.minSelection,a=e.selectionCount,r=e.t;return s.a.createElement(F.a,{bottom:2},s.a.createElement(T.a,{color:t,fontWeight:"regular",htmlTag:"p",size:"size0"},Object(z.a)(r(function(e){var t=e.t,n=e.minSelection,o=e.maxSelection,a=e.selectionCount;return n||o?!n&&o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectUpToX",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:t-n})}(t,o,a):n&&!o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectAtLeastX",{x:t}):t<=n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-n})}(t,n,a):n===o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectXchoices",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectXMore",{x:t-n})}(t,n,a):n!==o?function(e,t,n,o){return 0===o?e("block.multipleChoice.selectionLimit.hint.selectXYchoices",{x:t,y:n}):o<t?e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-o}):o>=t&&o<n?e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:n-o}):o===n?e("block.multipleChoice.selectionLimit.hint.noMore"):void 0}(t,n,o,a):void 0:function(e){return e("block.multipleChoice.hint")}(t)}({t:r,minSelection:o,maxSelection:n,selectionCount:a})))))};Gn.defaultProps={t:function(e){return e}},Gn.propTypes={color:p.a.string,maxSelection:p.a.number,minSelection:p.a.number,selectionCount:p.a.number,t:p.a.func};var Qn=Object(M.a)(Gn);function Xn(e){return it.a.A<=e&&e<=it.a.Z}var Zn="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Jn=function(e){var t=Math.floor(e%Zn.length);return Zn[t]};var $n=function e(t){return t>=Zn.length?e(Math.floor(t/Zn.length)-1)+Jn(t):Jn(t)},eo=u.default.div.withConfig({displayName:"MultipleChoice__Hidden",componentId:"jizsn7-0"})(["opacity:0;pointer-events:none;position:absolute;height:1px;overflow-y:scroll;"]),to=-1,no=C()(JSON.stringify,function(e){var t=e.choices,n=e.t;return t.map(function(e){return{label:n(e.label),ref:e.ref}})}),oo=function(e){function t(){return oe()(this,t),le()(this,se()(t).apply(this,arguments))}return he()(t,e),re()(t,[{key:"render",value:function(){var e=this.props,t=e.choices,n=e.allowOtherChoice,o=e.otherValue,a=e.vertical;return s.a.createElement(c.Fragment,null,t.map(function(e){return s.a.createElement(Wn.a,{title:e.label,key:e.ref,keyHelperLetter:"MM"})}),n&&a&&s.a.createElement(Wn.a,{title:o,keyHelperLetter:"MM"}))}}]),t}(c.PureComponent);oo.propTypes={choices:p.a.array,allowOtherChoice:p.a.bool,vertical:p.a.bool,otherValue:p.a.string,t:p.a.func};var ao=function(e){function t(e){var n;return oe()(this,t),n=le()(this,se()(t).call(this,e)),E()(de()(n),"getBlockNode",function(e){return n.blockNode=e}),E()(de()(n),"getHiddenListRef",function(e){return n.hiddenListRef=e}),n.state={keyboardHoveredIndex:to,editingOtherChoice:!1,longestChoiceWidth:null,otherValue:n.getOtherValue()},n.renderedColumns=1,n.firstCharacterShortcuts=[],n.handleSelect=n.handleSelect.bind(de()(n)),n.handleCommitAnswer=n.handleCommitAnswer.bind(de()(n)),n.handleKeyDown=n.handleKeyDown.bind(de()(n)),n.handleOtherChoiceClick=n.handleOtherChoiceClick.bind(de()(n)),n.handleOtherChoiceCommit=n.handleOtherChoiceCommit.bind(de()(n)),n.handleOtherChoiceChange=n.handleOtherChoiceChange.bind(de()(n)),n.handleOtherChoiceBlur=n.handleOtherChoiceBlur.bind(de()(n)),n.handleOtherChoiceKeyDown=n.handleOtherChoiceKeyDown.bind(de()(n)),n.handleColumnsChanged=n.handleColumnsChanged.bind(de()(n)),n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){this.updateLongestChoiceWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.keyboardHoveredIndex>=0;this.props.isActive&&e.isActive||t&&this.setState({keyboardHoveredIndex:to})}},{key:"shouldComponentUpdate",value:function(e,t){return ft(this.props,e)||this.state.longestChoiceWidth!==t.longestChoiceWidth||e.choices!==this.props.choices}},{key:"componentDidUpdate",value:function(e){if(this.props.isActive){e.choices.length!==this.props.choices.length&&this.props.recenter(),this.updateLongestChoiceWidth()}else{var t=e.theme,n=this.props.theme;!t.isFontLoaded&&n.isFontLoaded&&this.updateLongestChoiceWidth()}}},{key:"getChoicesLength",value:function(){var e=this.props,t=e.choices;return e.allowOtherChoice?t.length+1:t.length}},{key:"getOtherValue",value:function(){var e=this.props,t=e.choices,n=e.value;return n&&n.find(function(e){return!function(e){return t.map(function(e){return e.ref}).includes(e)}(e)})}},{key:"getOtherChoiceRef",value:function(){return"".concat(this.props.blockRef,"-other")}},{key:"getPositionRef",value:function(e){if(this.props.allowOtherChoice&&e===this.getChoicesLength()-1)return this.getOtherChoiceRef();var t=this.props.choices[e];return t?t.ref:void 0}},{key:"updateLongestChoiceWidth",value:function(){if(this.hiddenListRef){var e=this.props.longestChoiceWidth||this.hiddenListRef.clientWidth;e!==this.state.longestChoiceWidth&&this.setState({longestChoiceWidth:e})}}},{key:"createKeyShortcut",value:function(e,t,n){var o=this.props.keyboardShortcutType;if("letter"===o)return $n(e);if("firstCharacter"===o){var a=t.charAt(0).toUpperCase();return this.firstCharacterShortcuts.push(a),a}return"custom"===o?this.props.t(n):void 0}},{key:"handleOtherChoiceChange",value:function(e){(e.preventDefault(),e.stopPropagation(),Object(r.isTouch)()&&!Object(mt.a)())&&(0,this.props.recenter)(ht,ht);this.setState({otherValue:e.target.value})}},{key:"handleLetterKeyboardShortcut",value:function(e){var t=e-it.a.A;this.handleKeyboardSelect(t)}},{key:"handleFirstCharacterShortcut",value:function(e){var t=this.firstCharacterShortcuts.findIndex(function(t){return String.fromCharCode(e)===t});this.handleKeyboardSelect(t)}},{key:"handleCustomCharacterShortcut",value:function(e){var t=this.props,n=t.choices,o=t.t,a=n.find(function(t){var n=t.keyboardShortcut;return o(n)===String.fromCharCode(e)});a&&this.handleSelect(a.ref)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.props.keyboardShortcutType,o={};if("letter"===n&&Xn(t))return this.handleLetterKeyboardShortcut(t),e.preventDefault(),void e.stopPropagation();if("firstCharacter"===n&&Xn(t))return this.handleFirstCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();if("custom"===n&&Xn(t))return this.handleCustomCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();(o[it.a.SPACE]=this.handleSelectHovered,o[it.a.ENTER]=this.handleSelectHovered,this.props.verticalAlignment?(o[it.a.ARDOWN]=this.hoverNextStep,o[it.a.ARUP]=this.hoverPreviousStep):(o[it.a.ARRIGHT]=this.hoverNextStep,o[it.a.ARLEFT]=this.hoverPreviousStep,o[it.a.ARDOWN]=this.hoverNextRow,o[it.a.ARUP]=this.hoverPreviousRow),o[t])&&(o[t].call(this,e)||(e.preventDefault(),e.stopPropagation()))}},{key:"handleOtherChoiceClick",value:function(){this.unstageOtherChoice(),this.props.onInputFocus(),this.setState({editingOtherChoice:!0})}},{key:"handleOtherChoiceBlur",value:function(){var e=this;setTimeout(function(){e.props.onInputBlur(),e.setState({editingOtherChoice:!1})},300)}},{key:"handleOtherChoiceCommit",value:function(){var e=this;setTimeout(function(){e.props.onInputBlur(),e.stageOtherChoice(e.state.otherValue),e.setState({editingOtherChoice:!1})},300)}},{key:"removeStagedOtherChoice",value:function(e){var t=this;return e.filter(function(e){return e!==t.getOtherValue()})}},{key:"unstageOtherChoice",value:function(){var e=this.props,t=e.onStageAnswer,n=e.value,o=e.allowMultipleSelection,a=e.blockRef,r=n||[];t(a,o?this.removeStagedOtherChoice(r):[])}},{key:"stageOtherChoice",value:function(e){var t=this,n=this.props,o=n.onStageAnswer,a=n.value,r=n.allowMultipleSelection,i=n.blockRef,l=a||[],c=(r?[].concat(Mn()(this.removeStagedOtherChoice(l)),[e]):[e]).filter(Boolean);o(i,c),c.length&&!r&&setTimeout(function(){t.handleCommitAnswer()},gt)}},{key:"hoverNextRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex>=0?this.state.keyboardHoveredIndex+this.renderedColumns:0)}},{key:"hoverPreviousRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-this.renderedColumns)}},{key:"hoverNextStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex+1)}},{key:"hoverPreviousStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-1)}},{key:"changekeyboardHoveredIndex",value:function(e){return e>=this.getChoicesLength()||(e<0||(this.setState({keyboardHoveredIndex:e}),this.props.scrollToChoice(this.getPositionRef(e)),!1))}},{key:"handleSelectHovered",value:function(){this.handleKeyboardSelect(this.state.keyboardHoveredIndex)}},{key:"handleKeyboardSelect",value:function(e){if(e===to)this.handleCommitAnswer();else{var t=this.getPositionRef(e);if(t!==this.getOtherChoiceRef())t&&this.handleSelect(t);else((this.props.value||[]).includes(this.getOtherValue())||this.canSelectMoreChoices())&&this.handleOtherChoiceClick()}}},{key:"handleSelect",value:function(e){var t,n=this,o=this.props,a=o.onStageAnswer,r=o.allowMultipleSelection,i=o.value||[],l=i.includes(e);(l||this.canSelectMoreChoices())&&(t=r?l?i.filter(function(t){return t!==e}):[].concat(Mn()(i),[e]):l?[]:[e],a(this.props.blockRef,t),r||l||setTimeout(function(){n.handleCommitAnswer()},gt))}},{key:"handleColumnsChanged",value:function(e){this.renderedColumns=e}},{key:"handleOtherChoiceKeyDown",value:function(e){e.stopPropagation(),e.keyCode===it.a.ENTER&&this.handleOtherChoiceCommit(),e.keyCode===it.a.ESCAPE&&this.handleOtherChoiceBlur()}},{key:"handleCommitAnswer",value:function(){this.props.onCommitAnswer(this.props.blockRef)}},{key:"canSelectMoreChoices",value:function(){var e=this.props,t=e.value,n=e.validations.maxSelection;return!n||(t||[]).length<n}},{key:"render",value:function(){var e=this,t=this.props,n=t.allowMultipleSelection,o=t.allowOtherChoice,a=t.choices,r=t.isActive,i=t.isCommitButtonVisible,l=t.isFocused,c=t.onRequireStickyFooter,u=t.showLabels,d=t.supersized,p=t.t,h=t.theme,m=t.title,f=t.validations,b=t.value,g=t.verticalAlignment,y=t.withImage,C=f.minSelection,k=f.maxSelection,w=this.state.otherValue,S=this.getChoicesLength(),E=v()({},this.props,{title:{text:m,type:"legend"},useFieldset:!0}),O=b||[],x=r?this.state.keyboardHoveredIndex:null,R=!this.canSelectMoreChoices(),I=!g&&!this.props.longestChoiceWidth,A=this.props.longestChoiceWidth||this.state.longestChoiceWidth,T=y?Yn.a:qn.a;return s.a.createElement(rt,E,a&&s.a.createElement("div",{ref:this.getBlockNode},s.a.createElement(F.a,{top:4,bottom:2},n&&s.a.createElement(Qn,{color:h.colors.secondary,maxSelection:k,minSelection:C,selectionCount:O.length}),I&&s.a.createElement(eo,{innerRef:this.getHiddenListRef},s.a.createElement(oo,{choices:no({choices:a,t:p}),allowOtherChoice:o,otherValue:w,vertical:g})),s.a.createElement(Vt,{shouldFocus:l&&!this.state.editingOtherChoice,layoutItemsSize:this.props.layoutItemsSize,onKeyDown:this.handleKeyDown,"data-qa":"focusable"},s.a.createElement(Hn.ChoicesLayout,{onChangeColumns:this.handleColumnsChanged,vertical:g,longestChoiceWidth:A,ignoreBreakpoints:y},a.map(function(t,n){return s.a.createElement(Wn.a,{dataQa:"choice",dataQaIndex:n,title:u?Object(z.a)(p(t.label)):"",key:t.ref,choiceRef:t.ref,hovered:x===n,selected:O.includes(t.ref),disabled:R&&!O.includes(t.ref),onClick:e.handleSelect,color:h.colors.secondary,contextBackgroundColor:h.colors.background,keyHelperHint:p("label.hint.key"),keyHelperLetter:e.createKeyShortcut(n,t.label,t.keyboardShortcut),withImage:y,superSizedImage:d,isCropped:t.isCropped,imageSrc:t.attachment&&t.attachment.resource&&t.attachment.resource.default})}),o&&s.a.createElement(T,{dataQa:"other-choice",placeholder:p("block.multipleChoice.other"),value:w,editing:this.state.editingOtherChoice,choiceRef:this.getOtherChoiceRef(),hovered:x===S-1,disabled:R&&!this.getOtherValue(),selected:!!this.getOtherValue(),onClick:this.handleOtherChoiceClick,onChange:this.handleOtherChoiceChange,onBlur:this.handleOtherChoiceBlur,onEditConfirm:this.handleOtherChoiceCommit,onKeyDown:this.handleOtherChoiceKeyDown,color:h.colors.secondary,superSizedImage:d,contextBackgroundColor:h.colors.background,keyHelperHint:p("label.hint.key"),keyHelperLetter:this.createKeyShortcut(S-1,w)})))),n&&s.a.createElement(G,{buttonColor:h.colors.button,helperColor:h.colors.primary,backgroundColor:h.colors.background,onRequireStickyFooter:c,blockRef:this.props.blockRef,onClick:this.handleCommitAnswer,isVisible:i&&!this.state.editingOtherChoice,layoutItemsSize:this.props.layoutItemsSize})))}}]),t}(c.Component);ao.defaultProps={keyboardShortcutType:"letter",onCommitAnswer:Ae.a,onInputBlur:Ae.a,onInputFocus:Ae.a,onStageAnswer:Ae.a,recenter:Ae.a,scrollToChoice:Ae.a,showLabels:!0,t:function(e){return e},theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR,background:r.__OVERRIDE_THIS_COLOR}},validations:{},verticalAlignment:!0,withImage:!1},ao.propTypes={allowMultipleSelection:p.a.bool,allowOtherChoice:p.a.bool,blockRef:p.a.string,choices:p.a.arrayOf(p.a.shape({id:p.a.oneOfType([p.a.string,p.a.number]),ref:p.a.string,label:p.a.string,attachment:p.a.shape({resource:p.a.shape({default:p.a.string})})})),handleAppScroll:p.a.func,isActive:p.a.bool,isCommitButtonVisible:p.a.bool,isFocused:p.a.bool,keyboardShortcutType:p.a.string,layoutItemsSize:p.a.object,longestChoiceWidth:p.a.number,onCommitAnswer:p.a.func,onInputBlur:p.a.func,onInputFocus:p.a.func,onRequireStickyFooter:p.a.func,onStageAnswer:p.a.func,recenter:p.a.func,scrollToChoice:p.a.func,shouldClearInput:p.a.bool,showLabels:p.a.bool,supersized:p.a.bool,t:p.a.func,theme:p.a.object,title:p.a.string,value:p.a.array,validations:p.a.shape({minSelection:p.a.number,maxSelection:p.a.number}),verticalAlignment:p.a.bool,withImage:p.a.bool};var ro=ao,io={sm:110,md:140,lg:150},lo=C()(JSON.stringify,function(e){var t=e.choices,n=e.croppedChoiceRefs;return t.map(function(e){return v()({},e,{isCropped:!!n[e.ref]})})}),co=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).state={croppedChoiceRefs:{}},n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"componentDidUpdate",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"updateCroppedChoiceRefs",value:function(){var e=Pt()(regeneratorRuntime.mark(function e(t,n,o){var a,r,i,l,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a={},!this.updatingCroopedChoicesRefs){e.next=5;break}return e.abrupt("return");case 5:this.updatingCroopedChoicesRefs=!0,e.t0=regeneratorRuntime.keys(n);case 7:if((e.t1=e.t0()).done){e.next=24;break}if(r=e.t1.value,i=n[r],l=i.attachment&&i.attachment.resource,!(c=l&&l.src)||null!=o[i.ref]){e.next=22;break}return e.prev=13,e.next=16,Object(In.a)(c);case 16:s=e.sent,a[i.ref]=s,e.next=22;break;case 20:e.prev=20,e.t2=e.catch(13);case 22:e.next=7;break;case 24:Object.keys(a).length&&this.setState({croppedChoiceRefs:v()({},o,a)}),this.updatingCroopedChoicesRefs=!1;case 27:case"end":return e.stop()}},e,this,[[13,20]])}));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.breakpoint,n=e.supersized,o=e.choices,a=io[t]*(n?1.5:1),r=n?lo({choices:o,croppedChoiceRefs:this.state.croppedChoiceRefs}):o;return s.a.createElement(ro,x()({},this.props,{choices:r,verticalAlignment:!1,longestChoiceWidth:Math.round(a),withImage:!0}))}}]),t}(c.Component);p.a.defaultProps={choices:[]},co.propTypes={breakpoint:p.a.string,choices:p.a.array,supersized:p.a.bool};var so=Object(Q.withBreakpoint)(co),uo=n(626),po=n(622),ho=n(717),mo=n.n(ho),fo=n(621),bo=n.n(fo),go=u.default.div.withConfig({displayName:"NativeDropdown__SelectWrapper",componentId:"k3avl5-0"})(["position:relative;"]),vo=u.default.select.withConfig({displayName:"NativeDropdown__Select",componentId:"k3avl5-1"})(["appearance:none;display:block;width:100%;font-family:inherit;color:",";padding-left:0px;padding-right:26px;padding-bottom:8px;border-radius:0;border:none;transition:0.2s;background-color:transparent;",";box-shadow:0 1px ",";&:-moz-focusring{color:transparent;text-shadow:0 0 0 transparent;}outline:none;&:focus{outline:none;}"],function(e){return e.color},function(e){return Z.textSizes[e.size]},function(e){return Object(r.xxtransparent)(e.color)}),yo=Object(u.default)(an.a).attrs({svg:bo.a}).withConfig({displayName:"NativeDropdown__DropdownIcon",componentId:"k3avl5-2"})(["position:absolute;right:5px;top:14px;user-select:none;"]),Co=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).handleChange=n.handleChange.bind(de()(n)),n}return he()(t,e),re()(t,[{key:"handleChange",value:function(e){var t=this;this.props.onStageAnswer(this.props.blockRef,[e.target.value]),setTimeout(function(){t.props.onCommitAnswer(t.props.blockRef)},gt)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.choices,o=e.color,a=e.placeholder,i=e.breakpoint,l=n.map(function(e){return e.label}),c=""!==t,u=Object(r.xxtransparent)(o);return s.a.createElement(go,null,s.a.createElement(vo,{size:Object(A.breakpointToTextSize)("size3",i),color:c?o:u,value:t,onChange:this.handleChange},s.a.createElement("option",{value:""},a),l.map(function(e,t){return s.a.createElement("option",{key:t,value:e},e)})),s.a.createElement(yo,{color:o}))}}]),t}(c.Component);Co.defaultProps={color:r.__OVERRIDE_THIS_COLOR,blockRef:""},Co.propTypes={blockRef:p.a.string,onCommitAnswer:p.a.func,onStageAnswer:p.a.func,color:p.a.string,choices:p.a.array,placeholder:p.a.string,breakpoint:p.a.string,value:p.a.string};var ko=Co,wo=n(45),So=-1,Eo=u.default.div.withConfig({displayName:"Dropdown__Focusable",componentId:"sc-1auld0s-0"})(["outline:none;"]),Oo=function(e){function t(e){var n;oe()(this,t),(n=le()(this,se()(t).call(this,e))).handleMouseEnter=n.handleMouseEnter.bind(de()(n)),n.handleMouseLeave=n.handleMouseLeave.bind(de()(n)),n.handleAnswer=n.handleAnswer.bind(de()(n)),n.handleInputChange=n.handleInputChange.bind(de()(n)),n.handleInputBlur=n.handleInputBlur.bind(de()(n)),n.handleInputClick=n.handleInputClick.bind(de()(n)),n.handleKeyDown=n.handleKeyDown.bind(de()(n)),n.handleIconClick=n.handleIconClick.bind(de()(n)),n.handleWaypointEnter=n.handleWaypointEnter.bind(de()(n)),n.handleWaypointLeave=n.handleWaypointLeave.bind(de()(n)),n.inputId="".concat(n.props.type,"-").concat(n.props.blockRef),n.memoizedFilterOptions=C()(function(e,t){return t},po.filterOptions);var o=n.props.value;return n.state={forceHoverIndex:So,forceSelectedIndex:So,forceFocusInput:!1,insideViewport:!1,showList:!1,hovered:!1,filter:o&&o.length>0?o[0]:""},n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){this.props.isActive&&this.checkForceFocusInput(this.props.isFocused,this.state.insideViewport)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isActive,n=e.shouldClearInput,o=e.isFocused;t&&o&&!this.props.isFocused&&this.checkForceFocusInput(o,this.state.insideViewport),!t&&this.state.showList&&this.toggleDropdown(!1),n&&this.setState({filter:""})}},{key:"shouldComponentUpdate",value:function(e){return ft(this.props,e)}},{key:"componentDidUpdate",value:function(){this.state.forceFocusInput&&this.setState({forceFocusInput:!1})}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length>0?e[0]:void 0}},{key:"getFilteredOptions",value:function(){return this.memoizedFilterOptions(this.props.choices,this.state.filter)}},{key:"getListHeight",value:function(){if(!Object(wo.a)())return 0;var e=(this.props.layoutItemsSize.boundingClientRect.height||0)/2-8-0;return Math.max(0,e)}},{key:"handleWaypointEnter",value:function(){var e=this;this.setState({insideViewport:!0}),setTimeout(function(){return e.checkForceFocusInput(e.props.isFocused,e.state.insideViewport)},100)}},{key:"handleWaypointLeave",value:function(){this.setState({insideViewport:!1})}},{key:"handleMouseEnter",value:function(){this.setState({hovered:!0})}},{key:"handleMouseLeave",value:function(){this.setState({hovered:!1})}},{key:"stage",value:function(e){this.props.onStageAnswer(this.props.blockRef,[e])}},{key:"unstage",value:function(){this.setState({forceSelectedIndex:So}),this.props.onStageAnswer(this.props.blockRef,null)}},{key:"handleAnswer",value:function(e){var t=this,n=this.props.choices[e];this.setState({forceSelectedIndex:e,forceHoverIndex:So}),n&&setTimeout(function(){t.toggleDropdown(!1),t.stage(n.label),t.setState({filter:n.label}),t.props.onCommitAnswer(t.props.blockRef)},gt)}},{key:"handleInputChange",value:function(e){this.unstage();var t=this.memoizedFilterOptions(this.props.choices,e||""),n=null!=e&&t.length>0;this.toggleDropdown(n),this.setState({filter:e||""}),Object(r.isTouch)()&&this.props.recenter(ht)}},{key:"handleInputBlur",value:function(){this.state.hovered||this.toggleDropdown(!1)}},{key:"handleInputClick",value:function(){this.toggleDropdown(!0)}},{key:"toggleDropdown",value:function(e){var t=this;e!==this.state.showList&&(e&&setTimeout(function(){return t.props.recenter(ht)},200),this.setState({showList:e,forceHoverIndex:e?0:So}))}},{key:"handleIconClick",value:function(){this.toggleDropdown(!this.state.showList)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.getFilteredOptions().length;switch(t){case it.a.ARDOWN:e.preventDefault(),e.stopPropagation(),this.toggleDropdown(!0),this.setState({forceHoverIndex:Math.min(n-1,this.state.forceHoverIndex+1)});break;case it.a.ARUP:this.state.showList&&(e.preventDefault(),e.stopPropagation(),this.setState({forceHoverIndex:Math.max(0,this.state.forceHoverIndex-1)}));break;case it.a.ENTER:if(this.state.showList&&n>0&&this.state.forceHoverIndex!==So){e.preventDefault(),e.stopPropagation();var o=function(e,t){var n=t.find(function(t,n){return n===e});return n?n.index:null}(this.state.forceHoverIndex,this.memoizedFilterOptions(this.props.choices,this.state.filter));this.handleAnswer(o)}else this.props.validations&&this.props.validations.required&&(e.preventDefault(),e.stopPropagation(),this.unstage(),this.props.onCommitAnswer(this.props.blockRef),this.setState({showList:!1,filter:""}))}}},{key:"checkForceFocusInput",value:function(e,t){var n=this;e&&t&&(Object(r.isTouch)()||setTimeout(function(){n.setState({forceFocusInput:!0})},500))}},{key:"render",value:function(){var e=this.props,t=e.choices,n=e.title,o=e.placeholder,a=e.theme,i=e.isFocused,l=e.t,c=e.onStageAnswer,u=e.onCommitAnswer,d=e.blockRef,p=e.breakpoint,h=0===this.getFilteredOptions().length,m=!0===this.state.showList;return s.a.createElement(rt,x()({},this.props,{title:{text:n,for:this.inputId,type:"label"},hideError:m,customError:h?"block.dropdown.hint":null,noOkButton:!0}),Object(r.isTouch)()?s.a.createElement(F.a,{top:4},s.a.createElement(ko,{breakpoint:p,blockRef:d,choices:t,color:a.colors.secondary,placeholder:l("block.dropdown.placeholderTouch"),onStageAnswer:c,onCommitAnswer:u,value:this.getAnswerValue()})):s.a.createElement(uo.a,{onEnter:this.handleWaypointEnter,onLeave:this.handleWaypointLeave},s.a.createElement(F.a,{top:4,bottom:2},s.a.createElement(Eo,{tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-qa":"focusable"},s.a.createElement(mo.a,{placeholder:l(o),options:t.map(function(e){return e.label}),color:a.colors.secondary,contextBackgroundColor:a.colors.background,filterValue:this.state.filter,hoveredIndex:this.state.forceHoverIndex,selectedIndex:this.state.forceSelectedIndex,onFilterChange:this.handleInputChange,onInputClick:this.handleInputClick,onArrowClick:this.handleIconClick,onOptionClick:this.handleAnswer,onInputBlur:this.handleInputBlur,optionsMaxHeight:"".concat(this.state.showList?this.getListHeight():0,"px"),optionsOpen:this.state.showList,forceFocus:i&&this.state.forceFocusInput})))))}}]),t}(c.Component);Oo.propTypes={blockRef:p.a.string,breakpoint:p.a.string,choices:p.a.array,index:p.a.number,isActive:p.a.bool,isFocused:p.a.bool,layoutItemsSize:p.a.shape({boundingClientRect:p.a.shape({height:p.a.number})}),onCommitAnswer:p.a.func,onStageAnswer:p.a.func,placeholder:p.a.string,recenter:p.a.func,shouldClearInput:p.a.bool,t:p.a.func,theme:p.a.object,title:p.a.string,validations:p.a.shape({required:p.a.bool}),value:p.a.array},Oo.defaultProps={onCommitAnswer:Ae.a,onStageAnswer:Ae.a,recenter:Ae.a,t:function(e){return e},theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR,background:r.__OVERRIDE_THIS_COLOR}}};var xo=Object(Q.withBreakpoint)(Oo),Ro=n(715),Io=n.n(Ro);var Ao=function(e){var t=Object(c.useRef)([]),n=Object(c.useRef)(null);function o(){clearTimeout(n.current),n.current=null}return{onKeyDown:function(a){!function(e){return it.a.NUM_0<=e&&e<=it.a.NUM_9||it.a.NUMPAD_0<=e&&e<=it.a.NUMPAD_9}(a)?o():(null===n.current&&(t.current=[],n.current=setTimeout(function(){e(function(e){return e.reduce(function(e,t,n){return e+t*Math.pow(10,n)},0)}(t.current))},200)),t.current.unshift(function(e){return e-(e>=it.a.NUMPAD_0?it.a.NUMPAD_0:it.a.NUM_0)}(a)))},clearNumberTimeout:o}},To=function(e){var t=e.blockRef,n=e.children,o=e.isFocused,a=e.max,r=e.min,i=e.onCommitAnswer,u=e.title,d=e.unstageOnKeyDown,p=e.layoutItemsSize,h=Object(c.useState)(!1),m=l()(h,2),f=m[0],b=m[1],g=Object(c.useState)(-1),y=l()(g,2),C=y[0],k=y[1],w=Ao(x),S=w.onKeyDown,E=w.clearNumberTimeout;function O(){e.onStageAnswer(e.blockRef,[]),E()}function x(t){E(),t<e.min||t>e.max||(R()!==t?(e.onStageAnswer(e.blockRef,[t]),setTimeout(function(){e.onCommitAnswer(e.blockRef)},gt)):O())}function R(){var t=e.value;return t&&t.length>0?t[0]:void 0}Object(c.useEffect)(function(){o||b(!1)},[o]);var I=R(),A=v()({},e,{title:{text:u,type:"legend"},useFieldset:!0});return s.a.createElement(rt,A,s.a.createElement(Vt,{shouldFocus:o,layoutItemsSize:p,onKeyDown:function(e){var n=e.keyCode;if(S(n),n===it.a.ENTER&&(f?(x(C),e.stopPropagation()):i(t)),n===it.a.ARRIGHT){var o=R();null==o||f?f?k(Math.min(a,C+1)):(b(!0),k(r)):(b(!0),k(Math.min(a,o+1)),d&&O())}if(n===it.a.ARLEFT){var l=R();null==l||f?f&&k(Math.max(r,C-1)):(b(!0),k(Math.max(r,l-1)),d&&O())}}},s.a.createElement(F.a,{top:4,bottom:3},n({hoveredAmount:f?C:-1,isKeyboardHovered:f,onClick:function(e){x(e)},selectedAmount:I}))))};To.propTypes={blockRef:p.a.string,children:p.a.func,isFocused:p.a.bool,max:p.a.number,min:p.a.number,onCommitAnswer:p.a.func,onStageAnswer:p.a.func,title:p.a.string,unstageOnKeyDown:p.a.bool,value:p.a.array,layoutItemsSize:p.a.object};var jo=Object(c.memo)(To,bt);var Fo=function(e){Object(c.useEffect)(function(){var t=e.blockIndex,n=e.blockRef,o=e.onCommitAnswer,a=e.onStageAnswer;if(0===t){var r=function(){if(!window||!window.location)return null;var e=window.location.search.match(/prefilled_answer=[0-9]+/);return e?parseInt(e[0].split("=")[1],10):null}();null!=r&&setTimeout(function(){a(n,[r]),setTimeout(function(){o(n)},gt)},2e3)}},[]);var t=e.labels,n=e.startAtOne,o=e.steps,a=e.theme,r=w()(e,["labels","startAtOne","steps","theme"]),i=n?1:0,l=i+o-1;return s.a.createElement(jo,x()({max:l,min:i,theme:a},r),function(e){var n=e.hoveredAmount,o=e.isKeyboardHovered,r=e.onClick,c=e.selectedAmount;return s.a.createElement(Io.a,{color:a.colors.secondary,hoveredAmount:n,isKeyboardHovered:o,labelLeft:t.left,labelCenter:t.center,labelRight:t.right,max:l,min:i,onClick:r,selectedAmount:c})})};Fo.defaultProps={labels:{},onCommitAnswer:function(){},onStageAnswer:function(){},theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR}}},Fo.propTypes={blockIndex:p.a.number,blockRef:p.a.string,isFocused:p.a.bool,labels:p.a.shape({left:p.a.string,center:p.a.string,right:p.a.string}),onCommitAnswer:p.a.func,onStageAnswer:p.a.func,startAtOne:p.a.bool,steps:p.a.number,theme:p.a.object,title:p.a.string,value:p.a.array};var No=Fo,Do=u.default.div.withConfig({displayName:"Group__ButtonWrapper",componentId:"sc-14mp1zx-0"})(["",";margin-top:","px;width:100%;outline:none;&:focus{outline:none;}"],function(e){return e.isActive?"":"pointer-events: none;"},4*Z.unit);Do.displayName="ButtonWrapper";var _o=function(e){var t=e.blockRef,n=e.buttonText,o=e.children,a=e.isActive,r=e.isFocused,i=e.layoutItemsSize,u=e.theme,d=e.onRequireStickyFooter,p=e.t,h=void 0===p?function(e){return e}:p,m=Object(c.useState)(null),f=l()(m,2),b=f[0],g=f[1];vt(b,r,i);return s.a.createElement(rt,e,o,s.a.createElement(Do,{innerRef:g,isActive:a,tabIndex:"-1"},s.a.createElement(G,{buttonColor:u.colors.button,helperColor:u.colors.primary,backgroundColor:u.colors.background,onRequireStickyFooter:d,blockRef:t,label:h(n),onClick:function(n){n.stopPropagation(),a&&e.onCommitAnswer(t)},isAnimated:!1,isVisible:a,hideIcon:!0})))};_o.defaultProps={theme:{colors:{}}};var Po=Object(c.memo)(_o,bt),Bo=function(e){return s.a.createElement(Po,x()({},e,{titleCounterIcon:e.hideMarks?null:"quote"}))},Lo=n(713),Vo=n.n(Lo),zo=function(e){var t=e.shape,n=e.steps,o=e.theme,a=w()(e,["shape","steps","theme"]),r=n;return s.a.createElement(jo,x()({max:r,min:1,theme:o},a,{unstageOnKeyDown:!0}),function(e){var n=e.hoveredAmount,a=e.isKeyboardHovered,i=e.onClick,l=e.selectedAmount;return s.a.createElement(Vo.a,{color:o.colors.secondary,hoveredAmount:n,iconName:t,isKeyboardHovered:a,max:r,min:1,onClick:i,selectedAmount:l})})};zo.defaultProps={onCommitAnswer:function(){},onStageAnswer:function(){},shape:"circle",theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR}}},zo.propTypes={blockRef:p.a.string,isFocused:p.a.bool,onCommitAnswer:p.a.func,onStageAnswer:p.a.func,shape:p.a.string,steps:p.a.number,theme:p.a.object,title:p.a.string,value:p.a.array};var Mo=zo,Ho=u.default.div.withConfig({displayName:"Unsupported__Root",componentId:"sc-1p6qu18-0"})(["display:flex;margin-top:25px;max-width:750px;padding:15px;border-style:solid;border-width:1px;border-radius:3px;color:",";background-color:",";border-color:",";-webkit-font-smoothing:antialiased;"],function(e){return e.color},function(e){return Object(r.alphaToColor)(e.color,.05)},function(e){return Object(r.xtransparent)(e.color)}),Wo=function(e){var t=e.theme,n=e.t,o=e.type,a=w()(e,["theme","t","type"]);return s.a.createElement(rt,x()({theme:t},a),s.a.createElement(Ho,{color:t.colors.secondary},s.a.createElement("label",null,Object(z.a)(n("block.unsupported.message",{type:n("block.types.".concat(o))})))))};Wo.defaultProps={t:function(e){return e},theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR}}},Wo.propTypes={description:p.a.string,index:p.a.number,isActive:p.a.bool,isFirst:p.a.bool,listIndexText:p.a.string,t:p.a.func,theme:p.a.object,title:p.a.string,type:p.a.string};var Ko=Wo,qo=function(e){var t={true:"".concat(e.blockRef,"-yes"),false:"".concat(e.blockRef,"-no")},n=[{ref:t[!0],value:!0,label:"label.yes.default",keyboardShortcut:"label.yes.shortcut"},{ref:t[!1],value:!1,label:"label.no.default",keyboardShortcut:"label.no.shortcut"}],o=Array.isArray(e.value)?e.value[0]:e.value;return s.a.createElement(ro,x()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var a=l()(o,1)[0],r=n.find(function(e){return e.ref===a}),i=[{value:r&&r.value,label:r&&e.t(r.label)}];e.onStageAnswer(e.blockRef,r?i:[])},keyboardShortcutType:"custom",verticalAlignment:!0}))};qo.defaultProps={onCommitAnswer:Ae.a,onStageAnswer:Ae.a,t:function(e){return e},theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR,background:r.__OVERRIDE_THIS_COLOR}}},qo.propTypes={title:p.a.string,isActive:p.a.bool,isFocused:p.a.bool,blockRef:p.a.string,onStageAnswer:p.a.func,onCommitAnswer:p.a.func,handleAppScroll:p.a.func,t:p.a.func,value:p.a.array,theme:p.a.object,layoutItemsSize:p.a.object};var Uo=qo,Yo=function(e){var t={true:"".concat(e.blockRef,"-accept"),false:"".concat(e.blockRef,"-reject")},n=[{ref:t[!0],value:!0,label:"block.legal.accept"},{ref:t[!1],value:!1,label:"block.legal.reject"}],o=Array.isArray(e.value)?e.value[0]:e.value;return s.a.createElement(ro,x()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var a=l()(o,1)[0],r=n.find(function(e){return e.ref===a}),i=[{value:r&&r.value,label:r&&e.t(r.label)}];e.onStageAnswer(e.blockRef,r?i:[])},keyboardShortcutType:"letter",verticalAlignment:!0}))};Yo.defaultProps={onCommitAnswer:Ae.a,onStageAnswer:Ae.a,t:function(e){return e},theme:{colors:{secondary:"#FF00FF",background:"#FFFFFF"}}},Yo.propTypes={title:p.a.string,isActive:p.a.bool,isFocused:p.a.bool,blockRef:p.a.string,onStageAnswer:p.a.func,onCommitAnswer:p.a.func,handleAppScroll:p.a.func,t:p.a.func,value:p.a.array,theme:p.a.object,layoutItemsSize:p.a.object};var Go=Yo,Qo=0,Xo=function(e){var t=e.blockRef,n=e.inputType,o=e.isActive,a=e.isCommitButtonVisible,i=e.isFocused,u=e.layoutItemsSize,d=e.maxLength,p=e.onCommitAnswer,h=e.onInputBlur,m=e.onInputFocus,f=e.onRequireStickyFooter,b=e.onStageAnswer,g=e.placeholder,y=e.recenter,C=e.t,k=e.theme,w=e.title,S=e.type,E=e.validations,O="".concat(S,"-").concat(t),R=yt(600),I=l()(R,2),A=I[0],T=I[1],j=yt(1e3,!0),N=l()(j,2),D=N[0],_=N[1];Object(c.useEffect)(function(){return _(o)},[o]);var P=Object(c.useState)(),B=l()(P,2),L=B[0],V=B[1],z=vt(L,i,u);var M=v()({},e,{title:{text:w,for:O,type:"label"}}),H=e.value.length>0?e.value[0]:"";return s.a.createElement(rt,x()({isShaking:A},M),s.a.createElement(F.a,{top:4,bottom:2},s.a.createElement(Et.a,{getRef:V,placeholder:C(g),onKeyDown:function(e){dt(S,e),e.nativeEvent.keyCode===it.a.ENTER&&(Object(r.isTouch)()&&(L&&L.blur(),e.stopPropagation()),setTimeout(function(){o&&p(t)},Object(r.isTouch)()?Qo:0))},onKeyPress:function(e){ut(S,E,e).blocked&&T(!0)},onChange:function(e){var n=e.target.value;o&&b(t,n.slice(0,d))},onFocus:function(){Object(r.isTouch)()&&(m(),Object(mt.a)()||setTimeout(function(){y(ht)},Qo))},onBlur:h,maxLength:d,inputId:O,value:H,color:k.colors.secondary,forceFocusedStyle:D,type:n})),s.a.createElement(G,{buttonColor:k.colors.button,helperColor:k.colors.primary,backgroundColor:k.colors.background,onRequireStickyFooter:f,blockRef:t,isVisible:a,layoutItemsSize:u,onClick:function(e){var n=z&&Object(r.isTouch)();L&&n&&L.blur(),e.stopPropagation(),setTimeout(function(){o&&p(t)},n?Qo:0)}}))};Xo.defaultProps={handleAppScroll:Ae.a,onCommitAnswer:Ae.a,onStageAnswer:Ae.a,t:Ae.a,theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR}},value:[]},Xo.propTypes={blockRef:p.a.string,canUpdateFocus:p.a.bool,handleAppScroll:p.a.func,index:p.a.number,isActive:p.a.bool,isCommitButtonVisible:p.a.bool,isFocused:p.a.bool,inputType:p.a.string,layoutItemsSize:p.a.object,maxLength:p.a.number,onCommitAnswer:p.a.func,onInputBlur:p.a.func,onInputFocus:p.a.func,onRequireStickyFooter:p.a.func,onStageAnswer:p.a.func,placeholder:p.a.string,recenter:p.a.func,t:p.a.func,theme:p.a.object,title:p.a.string,type:p.a.string,validations:p.a.object,value:p.a.arrayOf(p.a.string)};var Zo=Object(c.memo)(Xo,bt),Jo=function(e){return s.a.createElement(Zo,x()({},e,{onCommitAnswer:function(){e.value&&Array.isArray(e.value)&&e.value[0]&&e.onStageAnswer(e.blockRef,e.value[0].trim()),e.onCommitAnswer(e.blockRef)}}))},$o=/\D+/g,ea=function(e){return s.a.createElement(Zo,x()({},e,{onStageAnswer:function(t,n){n=parseInt(n.replace($o,""),10),e.onStageAnswer(e.blockRef,n)},maxLength:18,inputType:"tel"}))},ta=n(692),na=n(691),oa=n(618),aa=Object(u.default)(an.a).withConfig({displayName:"icon__StrokeIcon",componentId:"pde181-0"})(["margin-right:8px;svg{box-shadow:0 0 0 1px ",";border-radius:4px;box-sizing:content-box;background-color:#fff;}"],function(e){return Object(r.isColorLight)(e.color)?Object(r.xtransparent)("#000"):Object(r.xtransparent)("#FFF")}),ra=-1,ia=1e3,la=u.default.div.withConfig({displayName:"select__MobileWrapper",componentId:"sc-1xepqbq-0"})(["position:absolute;z-index:",";",";"],Z.zLevels.level5,function(e){return e.isVisible?"":"pointer-events: none"}),ca=u.default.div.withConfig({displayName:"select__DesktopWrapper",componentId:"sc-1xepqbq-1"})(["position:absolute;top:-8px;width:450px;height:300px;overflow:hidden;z-index:",";",";"],Z.zLevels.level5,function(e){return e.isVisible?"":"pointer-events: none"});ca.displayName="DesktopWrapper";var sa=u.default.div.withConfig({displayName:"select__ChoiceContentWrapper",componentId:"sc-1xepqbq-2"})(["width:100%;display:flex;height:100%;align-items:center;padding:8px;height:","px;"],Object(r.isTouch)()?44:40),ua=u.default.div.withConfig({displayName:"select__ChoiceContentText",componentId:"sc-1xepqbq-3"})(["display:flex;height:100%;flex:1;justify-content:space-between;align-items:center;"]),da=C()(function(e){return e},function(e,t){return Object(po.filterOptions)(t,e,"name").map(function(t){return v()({},t,{name:Object(po.highlightFilteredOption)(t.name,e)})})}),pa=function(e,t,n,o,a){return function(r){var i=r.code,l=r.name,c=r.prefix,u=r.svg;return s.a.createElement(F.a,{bottom:.5,left:n,right:n},s.a.createElement(Rn.a,{fullHeight:!0},function(n){var r=n.hovered;return s.a.createElement(oa.ChoiceBox,{color:t,hovered:r||i===a||i===o,selected:i===o},s.a.createElement(sa,null,s.a.createElement(aa,{color:e,svg:u}),s.a.createElement(ua,null,s.a.createElement(T.a,{color:t,inline:!0,responsive:!0,size:"size0"},Object(z.a)(l)),s.a.createElement(T.a,{color:t,inline:!0,responsive:!0,size:"size0"},"+".concat(c)))))}))}},ha=function(e){function t(e){var n;return oe()(this,t),n=le()(this,se()(t).call(this,e)),E()(de()(n),"handleKeyDown",function(e){var t=e.keyCode,o=n.props,a=o.data,r=o.filterText,i=n.state.hoverIndex,l=da(r,a),c=l.length;switch(t){case it.a.ARDOWN:e.preventDefault(),e.stopPropagation(),n.setState({hoverIndex:Math.min(c-1,i+1)});break;case it.a.ARUP:e.preventDefault(),e.stopPropagation(),n.setState({hoverIndex:Math.max(0,i-1)});break;case it.a.TAB:case it.a.ESCAPE:e.preventDefault(),e.stopPropagation(),n.props.onClose();break;case it.a.ENTER:e.preventDefault(),e.stopPropagation(),i===ra?c>0&&""!==r?n.handleSelection(l[0]):n.props.onClose():c>0&&n.handleSelection(l[i])}}),E()(de()(n),"handleFilterChange",function(e){n.resetHoverIndex(),n.props.onFilterChange(e)}),E()(de()(n),"handleSelection",function(e){n.props.onSelect(e),setTimeout(function(){n.props.onClose()},ia)}),n.state={hoverIndex:ra},n}return he()(t,e),re()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.resetHoverIndex()}},{key:"resetHoverIndex",value:function(){this.setState({hoverIndex:ra})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.filterText,o=e.isOpen,a=e.onClose,i=e.color,l=e.language,c=e.backgroundColor,u=e.innerRef,d=e.onFilterChange,p=e.value,h=e.fontFamily,m=e.t,b=m("block.countryDropdown.searchCountries"),g=m("block.countryDropdown.hint"),v=da(n,t),y=this.state.hoverIndex,C=v.length&&v[y]?v[y].code:"";return Object(r.isTouch)()?s.a.createElement(la,{innerRef:u,isVisible:o},s.a.createElement(na.FullscreenSelect,{backgroundColor:c,color:i,filterTextPlaceholder:b,filterText:n,noResultsMessage:g,onFilterChange:d,optionRender:pa(c,i,1,p),optionHeight:48,options:v,isVisible:o,keyProp:"code",onClose:a,onSelect:this.handleSelection,language:l,fontFamily:h,dataQa:"country-fullscreen-select",disableAnimations:f})):s.a.createElement(D.a,{isVisible:o,type:"slideUp"},s.a.createElement(ca,{innerRef:u,isVisible:o,onKeyDown:this.handleKeyDown},s.a.createElement(na.DropdownSelect,{backgroundColor:c,color:i,filterTextPlaceholder:b,filterText:n,noResultsMessage:g,onFilterChange:this.handleFilterChange,optionRender:pa(c,i,2,p,C),optionHeight:44,options:v,isVisible:o,keyProp:"code",onClose:a,onSelect:this.handleSelection,language:l,dataQa:"country-dropdown-select"})))}}]),t}(c.PureComponent);ha.propTypes={backgroundColor:p.a.string,color:p.a.string,data:p.a.array,filterText:p.a.string,fontFamily:p.a.string,innerRef:p.a.object,isOpen:p.a.bool,language:p.a.string,onClose:p.a.func,onFilterChange:p.a.func,onSelect:p.a.func,value:p.a.string,t:p.a.func},ha.defaultProps={backgroundColor:r.__OVERRIDE_THIS_COLOR,color:r.__OVERRIDE_THIS_COLOR,data:[],filterText:"",fontFamily:Z.fontSans,onClose:Ae.a,onFilterChange:Ae.a,onSelect:Ae.a,t:Ae.a};var ma=Object(M.a)(ha),fa=Object(u.default)(Sn.a).withConfig({displayName:"CountryDropdown__TriggerButton",componentId:"khpc7r-0"})(["box-shadow:0px 1px ",";",";opacity:",";cursor:pointer;padding-bottom:16px;"],function(e){return Object(r.xxtransparent)(e.color)},function(e){return e.isVisible?"pointer-events: none;":""},function(e){return e.isVisible?"0":"1"}),ba=function(e,t,n){return e.map(function(e){return v()({},e,{name:n(e.code,t)})}).sort(function(e,t){return e.name.localeCompare(t.name)})},ga=function(e){function t(){var e,n;oe()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=le()(this,(e=se()(t)).call.apply(e,[this].concat(a))),E()(de()(n),"state",{filterText:"",sortedData:[],countryNameTranslator:function(e){return e}}),E()(de()(n),"dropdownRef",s.a.createRef()),E()(de()(n),"handleDocumentClick",function(e){n.isClickFromDropdown(n.dropdownRef.current,e.target)||!Object(r.isTouch)()&&n.enableClickClose&&n.props.onClose()}),E()(de()(n),"handleFilterTextChange",function(e){n.setState({filterText:e})}),E()(de()(n),"isClickFromDropdown",function(e,t){var n=t;do{if(n===e)return!0;n=n.parentElement}while(null!==n);return!1}),E()(de()(n),"handleSelect",function(e){return n.props.onChange(e.code)}),n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleDocumentClick),n.e(6).then(n.bind(null,767)).then(function(t){var n=t.countryData,o=t.countryNameTranslator;e.setState({countryNameTranslator:o,sortedData:ba(n,e.props.language,o)})}).catch(function(e){console.error("Error fetching country information: ",e)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleDocumentClick)}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isOpen&&!e.isOpen?setTimeout(function(){t.enableClickClose=!0},200):!this.props.isOpen&&e.isOpen&&(this.enableClickClose=!1,this.setState({filterText:""})),this.props.language!==e.language&&this.setState({sortedData:ba(this.state.sortedData,this.props.language,this.state.countryNameTranslator)})}},{key:"render",value:function(){var e=this.state,t=e.filterText,n=e.sortedData,o=this.props,a=o.value,r=o.isOpen,i=o.onOpen,l=o.onClose,u=o.color,d=o.language,p=o.backgroundColor,h=o.fontFamily,m=n.find(function(e){return e.code===a});return m?s.a.createElement(c.Fragment,null,s.a.createElement(ma,{autoComplete:"tel-national",data:n,filterText:t,isOpen:r,onClose:l,color:u,language:d,backgroundColor:p,innerRef:this.dropdownRef,onFilterChange:this.handleFilterTextChange,onSelect:this.handleSelect,value:m.code,fontFamily:h}),s.a.createElement(fa,{"data-qa":"trigger-button",onClick:i,isVisible:r,color:u,align:"center"},s.a.createElement(aa,{color:p,svg:m.svg}),s.a.createElement(an.a,{svg:bo.a,color:u}))):null}}]),t}(c.Component),va=n(628),ya=700,Ca=15,ka=/^[A-Za-z]+$/,wa=/[^0-9a-zA-Z]+/gi,Sa=Object(u.default)(F.a).withConfig({displayName:"PhoneNumber__Root",componentId:"ver6na-0"})(["display:flex;align-items:flex-end;max-width:450px;"]),Ea=Object(u.default)(F.a).withConfig({displayName:"PhoneNumber__DropdownWrapper",componentId:"ver6na-1"})(["position:relative;z-index:",";"],Z.zLevels.level1),Oa=function(e){function t(){var e,n;oe()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=le()(this,(e=se()(t)).call.apply(e,[this].concat(a))),E()(de()(n),"state",{isOpen:!1,isShaking:!1,getExampleNumber:null}),E()(de()(n),"getInputRef",function(e){return n.textInput=e}),E()(de()(n),"getValue",function(e){return e.value&&e.value.length>0?e.value[0]:{}}),E()(de()(n),"getNumber",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;return n.getValue(e).number||""}),E()(de()(n),"getCountryCode",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;return n.getValue(e).countryCode||e.defaultCountryCode.toUpperCase()}),E()(de()(n),"getPlaceholder",function(e){return n.state.getExampleNumber?n.state.getExampleNumber(e,ta).formatNational():""}),E()(de()(n),"handleKeyPress",function(e){if(String.fromCharCode(e.charCode).match(ka))return e.preventDefault(),void n.shake();Object(va.c)(n.getCountryCode(),e.target.value).replace(wa,"").length>Ca&&(e.preventDefault(),n.shake())}),E()(de()(n),"handleKeyDown",function(e){e.nativeEvent.keyCode===it.a.ENTER&&(Object(r.isTouch)()&&n.textInput&&n.textInput.blur(),e.stopPropagation(),setTimeout(function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)},Object(r.isTouch)()?ya:0))}),E()(de()(n),"handleValueChange",function(e,t){var o=e;try{o=n.parsePhoneNumber(e,t).formatInternational()}catch(e){}n.props.isActive&&n.props.onStageAnswer(n.props.blockRef,{number:e,countryCode:t,label:o})}),E()(de()(n),"handleNumberChange",function(e){var t=e.target.value,o=n.getNumber(),a=n.getCountryCode(),r=n.guessCountryBasedOnNumber(t)||a,i=r!==a;n.AsYouType&&i&&n.createCountryFormatter(r),n.parseDigits(t)!==n.parseDigits(o)&&(t=n.formatPhoneNumber(t)),n.handleValueChange(t,r)}),E()(de()(n),"handleCountryChange",function(e){if(e!==n.getCountryCode()){n.AsYouType&&n.createCountryFormatter(e);var t=n.formatPhoneNumber(n.getNumber());n.handleValueChange(t,e)}}),E()(de()(n),"handleDropdownOpen",function(){n.props.recenter(ht),n.setState({isOpen:!0})}),E()(de()(n),"handleDropdownClose",function(){n.setState({isOpen:!1}),Object(r.isTouch)()||n.textInput.focus()}),E()(de()(n),"handleCommit",function(e){var t=n.isInputFocused()&&Object(r.isTouch)();n.textInput&&t&&n.textInput.blur(),e.stopPropagation(),setTimeout(function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)},t?ya:0)}),n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){var e=this;n.e(0).then(n.bind(null,272)).then(function(t){var n=t.AsYouType,o=t.parseDigits,a=t.parsePhoneNumber,r=t.getExampleNumber;e.AsYouType=n,e.formatter=new n(e.getCountryCode()),e.parseDigits=o,e.parsePhoneNumber=a,e.setState({getExampleNumber:r})}).catch(function(e){console.error("Error fetching phone library: ",e)}),this.updateInputFocus(this.textInput,this.props.isActive),this.props.handleAppScroll(function(){e.props.isActive&&e.updateInputFocus(e.textInput,e.props.isActive)})}},{key:"componentDidUpdate",value:function(e){var t=this.getCountryCode(e),n=this.getCountryCode();this.AsYouType&&t!==n&&this.createCountryFormatter(n),this.updateInputFocus(this.textInput,this.props.isActive,e.isActive)}},{key:"createCountryFormatter",value:function(e){this.formatter=new this.AsYouType(e)}},{key:"formatPhoneNumber",value:function(e){return this.parseDigits&&(e=this.formatter.input(e),this.formatter.reset()),e}},{key:"guessCountryBasedOnNumber",value:function(e){this.formatter.input(e);var t=this.formatter.country||this.formatter.metadata._country;return this.formatter.reset(),t}},{key:"shake",value:function(){var e=this;this.setState({isShaking:!0}),clearTimeout(this.shakeStopTimeout),this.shakeStopTimeout=setTimeout(function(){return e.setState({isShaking:!1})},600)}},{key:"updateInputFocus",value:function(e,t,n){this.props.canUpdateFocus&&!this.state.isOpen&&(t?!Object(r.isTouch)()&&V(e,this.props.layoutItemsSize)&&e.focus():n&&e.blur())}},{key:"isInputFocused",value:function(){return!!document&&document.activeElement===this.textInput}},{key:"render",value:function(){var e=this.props,t=e.blockRef,n=e.isCommitButtonVisible,o=e.language,a=e.layoutItemsSize,r=e.theme,i=e.title,l=e.onRequireStickyFooter,c=this.state.isOpen,u=this.getNumber(),d=this.getCountryCode(),p=v()({},this.props,{title:{text:i,type:"label"}});return s.a.createElement(rt,x()({isShaking:this.state.isShaking},p),s.a.createElement(Sa,{top:4,bottom:2},s.a.createElement(Ea,{right:2},s.a.createElement(ga,{backgroundColor:r.colors.background,color:r.colors.secondary,isOpen:c,language:o,onClose:this.handleDropdownClose,onOpen:this.handleDropdownOpen,value:d,onChange:this.handleCountryChange,fontFamily:r.font})),s.a.createElement(Et.a,{getRef:this.getInputRef,inputId:"phone-number-".concat(t),color:r.colors.secondary,value:u,placeholder:this.getPlaceholder(d),onChange:this.handleNumberChange,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,type:"tel",autoComplete:"tel-national",dataQa:"phone-number-input",showBorder:!0})),s.a.createElement(G,{buttonColor:r.colors.button,helperColor:r.colors.primary,backgroundColor:r.colors.background,onRequireStickyFooter:l,blockRef:t,isVisible:n,layoutItemsSize:a,onClick:this.handleCommit}))}}]),t}(c.Component);E()(Oa,"propTypes",{blockRef:p.a.string,canUpdateFocus:p.a.bool,handleAppScroll:p.a.func,isActive:p.a.bool,isCommitButtonVisible:p.a.bool,language:p.a.string,layoutItemsSize:p.a.object,onCommitAnswer:p.a.func,onInputBlur:p.a.func,onInputFocus:p.a.func,onRequireStickyFooter:p.a.bool,onStageAnswer:p.a.func,recenter:p.a.func,theme:p.a.object,title:p.a.string}),E()(Oa,"defaultProps",{defaultCountryCode:"US",theme:{colors:{secondary:r.__OVERRIDE_THIS_COLOR,background:r.__OVERRIDE_THIS_COLOR}},recenter:function(){}});var xa=Oa,Ra=function(e){return s.a.createElement(Zo,x()({},e,{maxLength:e.validations.maxLength}))};Ra.defaultProps={validations:{maxLength:null}},Ra.propTypes={validations:p.a.shape({maxLength:p.a.number})};var Ia=Ra,Aa=new RegExp(/(https?|ftp|app):\/\//),Ta=function(e){return s.a.createElement(Zo,x()({},e,{onCommitAnswer:function(){var t=Array.isArray(e.value)?e.value[0]:e.value;t&&!Aa.test(t)&&e.onStageAnswer(e.blockRef,"".concat("https://").concat(t)),e.onCommitAnswer(e.blockRef)},inputType:"url"}))},ja=n(658),Fa=n.n(ja),Na=n(105),Da=n(116),_a=n(190),Pa=function(e,t){var n=ja.textSizes[t],o="sm"===t?-1:0,a={color:"".concat(e),lineHeight:"".concat(n.lineHeight,"px"),letterSpacing:"".concat(o,"px"),fontSize:"".concat(n.fontSize,"px"),fontWeight:"".concat(Z.fontWeights.regular),fontFamily:"".concat(Z.fontMonospace),fontSmoothing:"antialiased"};return{base:v()({},a,{"::placeholder":v()({},a,{color:"".concat(Object(r.xxtransparent)(e))})})}},Ba=u.default.span.withConfig({displayName:"StripePayment__PriceTag",componentId:"sc-1jeyk0z-0"})(["font-weight:bold;"]);Ba.displayName="PriceTag";var La=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).stripeElement=null,n.cardName=null,n.cardNumber=null,n.state={cardError:null,isCardNumberFocused:!1,isCardNameFocused:!1},n.handleCommit=n.handleCommit.bind(de()(n)),n.handleCardNumberChange=n.handleCardNumberChange.bind(de()(n)),n.handleCardEnter=n.handleCardEnter.bind(de()(n)),n.handleCardNumberFocus=n.handleCardNumberFocus.bind(de()(n)),n.handleCardNumberBlur=n.handleCardNumberBlur.bind(de()(n)),n.handleCardNameKeyDown=n.handleCardNameKeyDown.bind(de()(n)),n.handleCardNameChange=n.handleCardNameChange.bind(de()(n)),n.handleCardNameFocus=n.handleCardNameFocus.bind(de()(n)),n.handleCardNameBlur=n.handleCardNameBlur.bind(de()(n)),n.getAnswerValue=n.getAnswerValue.bind(de()(n)),n.focustimeout=null,n}return he()(t,e),re()(t,[{key:"updateCardFocus",value:function(e){var t=this;Object(r.isTouch)()||!this.props.isFocused||this.state.isCardNameFocused||this.state.isCardNumberFocused||!V(e,this.props.layoutItemsSize)||(clearTimeout(this.focustimeout),this.focustimeout=setTimeout(function(){t.props.isActive&&t.stripeElement.focus()},100))}},{key:"componentDidMount",value:function(){var e=Pt()(regeneratorRuntime.mark(function e(){var t,n,o,a,i,l,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.theme,o=t.breakpoint,a=t.isActive,i=t.isFocused,l={hidePostalCode:!0,hideIcon:!0,style:Pa(n.colors.secondary,o)},e.prev=2,e.next=5,Object(Na.a)(l);case 5:this.stripeElement=e.sent,this.stripeElement.on("change",this.handleCardNumberChange),this.stripeElement.on("focus",this.handleCardNumberFocus),this.stripeElement.on("blur",this.handleCardNumberBlur),this.stripeElement.on("ready",function(){!Object(r.isTouch)()&&a&&i&&c.stripeElement.focus()}),this.stripeElement.mount(this.cardNumber),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0.message);case 16:this.props.handleAppScroll(function(){c.props.isActive&&c.updateCardFocus(c.cardNumber)});case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.stripeElement&&this.stripeElement.destroy(),this.stage(this.props.blockRef,{cardholdersName:"",isCardValid:!1,isCardEmpty:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.theme,o=t.breakpoint,a=t.isActive,r=n.colors.secondary,i=e.theme.colors.secondary;this.stripeElement&&(a||(this.state.isCardNameFocused&&this.cardName&&this.cardName.blur(),this.state.isCardNumberFocused&&this.stripeElement.blur()),e.breakpoint===o&&i===r||this.stripeElement.update({style:Pa(r,o)}))}},{key:"preventInputBlur",value:function(){var e=this;this.preventBlur=!0,setTimeout(function(){return e.preventBlur=!1},300),clearTimeout(this.inputBlurTimeout)}},{key:"handleInputBlur",value:function(){var e=this;this.inputBlurTimeout=setTimeout(function(){!e.preventBlur&&e.props.onInputBlur()},100)}},{key:"handleTouchRecentering",value:function(){var e=this;Object(r.isTouch)()&&!Object(mt.a)()&&setTimeout(function(){e.props.recenter(ht,ht)},700)}},{key:"handleCardNumberFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNumberFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNumberBlur",value:function(){this.setState({isCardNumberFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNameFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNameBlur",value:function(){this.setState({isCardNameFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameKeyDown",value:function(e){if(e.keyCode===it.a.TAB&&e.shiftKey)return this.stripeElement.focus(),void e.stopPropagation();var t=this.getAnswerValue(),n=t.cardholdersName,o=t.isCardValid;e.keyCode===it.a.ENTER&&o&&n&&(this.handleCommit(),this.cardName&&this.cardName.blur())}},{key:"handleCommit",value:function(){var e=this;setTimeout(function(){e.props.isActive&&e.props.onCommitAnswer(e.props.blockRef)},0)}},{key:"handleCardEnter",value:function(){this.cardName&&this.cardName.focus()}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length&&e[0]?e[0]:{}}},{key:"stage",value:function(e,t){if(t&&!t.cardholdersName&&t.isCardEmpty)return this.props.onStageAnswer(e,[]);this.props.onStageAnswer(e,[t])}},{key:"handleCardNameChange",value:function(e){this.stage(this.props.blockRef,v()({},this.getAnswerValue(),{cardholdersName:e.target.value}))}},{key:"handleCardNumberChange",value:function(e){this.setState({cardError:e.error}),this.stage(this.props.blockRef,v()({},this.getAnswerValue(),{isCardValid:e.complete,isCardEmpty:e.empty}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.breakpoint,a=t.buttonText,r=t.isCommitted,i=t.isReviewModeEnabled,l=t.layoutItemsSize,c=t.price,u=t.theme,d=t.stripeErrorCodes,p=t.validations,h=t.onRequireStickyFooter,m=t.t,f=this.state.cardError,b=this.getAnswerValue(),g=b.cardholdersName,v=b.isCardValid,y=void 0!==v&&v,C=b.isCardEmpty,k=void 0===C||C,w=p&&p.required,S=r||i,E=!!g,O=S&&!E&&(!k||w),R=f||S&&(k||!y)&&(E||w),I=d[f&&f.code]||"label.error.required",A=this.props.isCommitButtonVisible&&y&&E;return s.a.createElement(rt,x()({},this.props,{validationError:null,title:{text:this.props.title,for:this.inputId,type:"label"}}),s.a.createElement(F.a,{top:1},s.a.createElement(ge.a,{type:"description",color:u.colors.primary,htmlTag:"p"},m("block.payment.hintCharge")," ",s.a.createElement(Ba,null,c)),s.a.createElement(ge.a,{type:"description",color:u.colors.primary,htmlTag:"p"},m("block.payment.hintStore"))),s.a.createElement(F.a,{bottom:2},s.a.createElement(Fa.a,{breakpoint:o,color:u.colors.secondary,cardNameRef:function(t){return e.cardName=t},cardName:g||"",cardNameErrorMessage:Object(z.a)(m("label.error.required")),cardNamePlaceholder:m("block.payment.placeholder.cardName"),onCardNameChange:this.handleCardNameChange,onCardNameKeyDown:this.handleCardNameKeyDown,onCardNameFocus:this.handleCardNameFocus,onCardNameBlur:this.handleCardNameBlur,isCardNameErrorVisible:!!O,cardNumberRef:function(t){return e.cardNumber=t},cardNumberErrorMessage:Object(z.a)(m(I)),isCardNumberFocused:this.state.isCardNumberFocused,isCardNumberErrorVisible:!!R,onCardNumberEnterPressed:this.handleCardEnter,stripeLinkText:m("block.payment.securedBy")})),s.a.createElement(G,{buttonColor:u.colors.button,helperColor:u.colors.primary,backgroundColor:u.colors.background,onRequireStickyFooter:h,hideIcon:!0,blockRef:n,label:a,onClick:this.handleCommit,isVisible:A,layoutItemsSize:l}))}}]),t}(c.PureComponent);La.propTypes={price:p.a.string,theme:p.a.object,t:p.a.func,value:p.a.array,stripeErrorCodes:p.a.object,layoutItemsSize:p.a.object,handleAppScroll:p.a.func,recenter:p.a.func,onInputFocus:p.a.func,onInputBlur:p.a.func},La.defaultProps={breakpoint:"lg",theme:{colors:{primary:r.__OVERRIDE_THIS_COLOR,secondary:r.__OVERRIDE_THIS_COLOR}},handleAppScroll:function(){},onInputFocus:function(){},onInputBlur:function(){},recenter:function(){},t:function(e){return e},value:[{cardholdersName:"",isCardEmpty:!0,isCardValid:!1}],stripeErrorCodes:{}};var Va,za=Object(o.b)(function(e){return{price:Object(Da.b)(e),stripeErrorCodes:_a.a}})(Object(Q.withBreakpoint)(La)),Ma=(Va={},E()(Va,Ie.a.date,{component:Object(M.a)(Dt)}),E()(Va,Ie.a.dropdown,{component:Object(M.a)(xo)}),E()(Va,Ie.a.email,{component:Object(M.a)(Jo)}),E()(Va,Ie.a.fileUpload,{component:Object(M.a)(Vn)}),E()(Va,Ie.a.group,{component:Po}),E()(Va,Ie.a.legal,{component:Object(M.a)(Go)}),E()(Va,Ie.a.longText,{component:Object(M.a)(wt)}),E()(Va,Ie.a.multipleChoice,{component:Object(M.a)(ro)}),E()(Va,Ie.a.number,{component:Object(M.a)(ea)}),E()(Va,Ie.a.opinionScale,{component:No}),E()(Va,Ie.a.pictureChoice,{component:Object(M.a)(so)}),E()(Va,Ie.a.rating,{component:Mo}),E()(Va,Ie.a.shortText,{component:Object(M.a)(Ia)}),E()(Va,Ie.a.statement,{component:Bo}),E()(Va,Ie.a.website,{component:Object(M.a)(Ta)}),E()(Va,Ie.a.yesNo,{component:Object(M.a)(Uo)}),E()(Va,Ie.a.payment,{component:Object(M.a)(za)}),E()(Va,Ie.a.phoneNumber,{component:Object(M.a)(xa)}),Va),Ha={component:Object(M.a)(Ko)},Wa=function(e){var t=e.type,n=w()(e,["type"]),o=Ma.hasOwnProperty(t)?Ma[t]:Ha;return s.a.createElement(o.component,Object.assign({type:t},n,o.props))};Wa.propTypes={type:p.a.string};var Ka=Wa,qa=n(4);function Ua(){return function(e){setTimeout(function(){e({type:qa.I,payload:{isInputFocused:!1}})},50)}}function Ya(){return{type:qa.I,payload:{isInputFocused:!0}}}var Ga=n(7),Qa=n(95),Xa=n(8),Za=n(13),Ja=n(98),$a=n(299);var er=C()(JSON.stringify,Za.h),tr=Object(o.b)(function(e,t){var n=t.blockRef,o=function(e,t){var n=null;return function(o,a){var r=Object(Ga.f)(o,a),i=Object(Za.b)(o,a),l=Object(Ga.h)(o,r),c=i&&Object(Za.d)(i),s=Object(Ja.e)(o);if(n&&!l&&n.isActive===l&&n.theme===s&&n.isCommitted===c)return n;var u=!Object(Za.p)(r.type,i),d=v()({},r,{blockIndex:Object(Ga.g)(o,a),isFirstBlock:0===Object(Ga.g)(o,a),title:e(o),description:t(o),formId:Object(Xa.d)(o),isAnswered:u,isActive:l,theme:s,isCommitted:c,isFocused:l&&Object(Ga.a)(o),canUpdateFocus:Object(Ga.a)(o),isReviewModeEnabled:Object(Xa.n)(o),isValid:i&&Object(Za.e)(i),isVisible:Object(Ga.y)(o,r),validationError:Object(Za.g)(o,r),isCommitButtonVisible:Object(Ga.z)(o,a),isVisibleGroupStickyHeader:Object(Xa.i)(o),isLivePreview:Object(Xa.k)(o),language:Object(Xa.q)(o),shouldClearInput:!u&&Object(Xa.k)(o),value:er(i),scrolling:Object(Xa.w)(o),ref:void 0});return n=d,d}}(Object(Qa.b)(n),Object(Qa.a)(n));return function(e){return o(e,n)}},function(e){return v()({},Object(a.b)({onCommitAnswer:h.c,onStageAnswer:h.v,scrollTo:h.f,recenter:h.n,scrollToChoice:h.t,endAutoScroll:h.e,goToNextBlock:h.h,goToPreviousBlock:h.j,onInputFocus:Ya,onInputBlur:Ua,onRequireStickyFooter:h.o,onRequireStickyHeader:h.p},e),{handleAppScroll:function(e,t){return Object($a.onAction)(e).bind(null,t)}(e,qa.d)})})(Ka),nr=n(627),or=n(650),ar=n.n(or),rr=300,ir=500,lr=u.default.div.withConfig({displayName:"MouseWheelTrigger__Root",componentId:"sc-1nbmmxo-0"})(["outline:none;width:100%;"]),cr=function(e){function t(){var e,n;oe()(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=le()(this,(e=se()(t)).call.apply(e,[this].concat(a))),E()(de()(n),"Lethargy",new ar.a),E()(de()(n),"accumulated",0),E()(de()(n),"timeout",null),E()(de()(n),"disableTimeout",null),E()(de()(n),"disabledSwipe",!1),E()(de()(n),"handleWheelScroll",function(e){var t=n.props,o=t.upHandler,a=t.downHandler,r=n.Lethargy.check(e),i=e.deltaY;n.disabledSwipe||!1===r||(n.accumulated+=i,n.setTimeout(function(){n.accumulated=0})),n.accumulated<-rr&&(o(),n.accumulated=0,n.disableSwipe(ir)),n.accumulated>rr&&(a(),n.accumulated=0,n.disableSwipe(ir))}),n}return he()(t,e),re()(t,[{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(e,500)})},{key:"disableSwipe",value:function(e){var t=this;this.disableTimeout&&clearTimeout(this.disableTimeout),this.disabledSwipe=!0,this.disableTimeout=setTimeout(function(){t.disabledSwipe=!1},e)}},{key:"render",value:function(){return s.a.createElement(lr,{style:this.props.customStyle,onWheel:this.handleWheelScroll,tabIndex:"0"},this.props.children)}}]),t}(c.Component),sr=n(198),ur=function(e){function t(){return oe()(this,t),le()(this,se()(t).apply(this,arguments))}return he()(t,e),re()(t,[{key:"render",value:function(){var e=this,t=this.props.fullHeight?{height:"100%"}:{};return s.a.createElement(cr,{customStyle:t,upHandler:function(){e.props.canSwipePrevious&&(e.props.goToPreviousBlock(),Object(sr.a)("changeBlock",{direction:"previous",method:"wheel"}))},downHandler:function(){e.props.canSwipeNext&&(e.props.goToNextBlock(),Object(sr.a)("changeBlock",{direction:"next",method:"wheel"}))}},s.a.createElement(nr.a,x()({style:t,onSwiped:function(t){e.swipping=!1;var n=e.props,o=n.canSwipeNext,a=n.canSwipePrevious;Math.abs(t.deltaY)>50/t.velocity&&("Up"===t.dir?o&&!e.blockSwipeNext&&(e.props.goToNextBlock(),Object(sr.a)("changeBlock",{direction:"next",method:"swipe"})):"Down"===t.dir&&a&&!e.blockSwipePrevious&&(e.props.goToPreviousBlock(),Object(sr.a)("changeBlock",{direction:"previous",method:"swipe"})))},onSwiping:function(){if(e.swipping)return!1;var t=e.props,n=t.canSwipeNext,o=t.canSwipePrevious;e.blockSwipeNext=!n,e.blockSwipePrevious=!o,e.swipping=!0}},{delta:10,preventDefaultTouchmoveEvent:!1,trackTouch:!0,trackMouse:!1}),this.props.children))}}]),t}(c.PureComponent),dr=n(41),pr=n(649),hr=n.n(pr),mr=n(144),fr=u.default.div.withConfig({displayName:"layout-media__Root",componentId:"m15s05-0"})(["position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:",";transition:opacity 0.2s ease ","s;pointer-events:none;z-index:",";"],function(e){return e.isVisible?1:0},function(e){return e.isVisible?.2:0},function(e){return e.isBackground?Z.zLevels.levelN1:"auto"}),br=Object(u.keyframes)(["0%{opacity:1;}100%{opacity:0;}"]),gr=Object(u.keyframes)(["0%{opacity:0;}100%{opacity:1;}"]),vr=u.default.div.withConfig({displayName:"layout-media__AnimationWrapper",componentId:"m15s05-1"})(["position:absolute;top:0;left:",";right:0;bottom:0;visibility:",";background:",";",";",";"],function(e){return e.fullWidth?0:"50%"},function(e){return e.isVisible?"visible":"hidden"},function(e){return Object(r.xxxtransparent)(Object(r.contrast)(e.contextBackgroundColor,.02,.8,1,.9))},function(e){return e.isVisible&&e.appearing&&"animation: ".concat(gr," 300ms forwards")},function(e){return e.isVisible&&e.fading&&"animation: ".concat(br," 300ms forwards 200ms")}),yr=u.default.div.withConfig({displayName:"layout-media__AttachmentWrapper",componentId:"m15s05-2"})(["height:100%;width:100%;display:flex;align-items:center;justify-content:center;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;"],function(e){return e.paddingLeft},function(e){return e.paddingRight},function(e){return e.paddingTop},function(e){return e.paddingBottom}),Cr=function(e){var t=e.blocks,n=e.areBlocksVisible,o=e.previousActiveRef,a=e.currentRef,r=e.nextRef,i=e.previousRef,l=e.theme,c=Object(Q.useBreakpoint)(),u=t.find(function(e){return e.ref===a}),d=X(hr()(Ve.b.STACK,["layout","type"],u),c),p=n&&[Ve.a.SPLIT.DESKTOP,Ve.a.FLOAT.DESKTOP,Ve.a.WALLPAPER.DESKTOP,Ve.a.WALLPAPER.MOBILE].includes(d),h=d===Ve.a.WALLPAPER.DESKTOP||d===Ve.a.WALLPAPER.MOBILE;return s.a.createElement(fr,{isVisible:p,isBackground:h},t.map(function(e){if(!e.attachment||!e.layout)return null;var t=X(e.layout.type,c),n=t===Ve.a.SPLIT.DESKTOP||t===Ve.a.WALLPAPER.DESKTOP||t===Ve.a.WALLPAPER.MOBILE,u=n?0:Object(Be.getPadding)(c),d=e.ref===a,p=e.ref===i,h=e.ref===r,m=e.ref===o,f=d||m;if(!(d||p||h))return null;var b=e.attachment.type===mr.video?v()({},e.attachment,{resource:v()({},e.attachment.resource,{scale:1})}):e.attachment,g=t===Ve.a.WALLPAPER.DESKTOP||t===Ve.a.WALLPAPER.MOBILE;return s.a.createElement(vr,{key:e.ref,isVisible:f,appearing:a===e.ref,fading:a!==e.ref,contextBackgroundColor:l.colors.background,fullWidth:t===Ve.a.WALLPAPER.DESKTOP||t===Ve.a.WALLPAPER.MOBILE},s.a.createElement(yr,{paddingTop:u,paddingBottom:u,paddingLeft:u,paddingRight:u},s.a.createElement(Re.a,x()({cover:n},b,{isHighDefinition:g,isCentered:!0}))))}))};Cr.defaultProps={theme:{colors:{background:r.__OVERRIDE_THIS_COLOR}}},Cr.propTypes={blocks:p.a.array,areBlocksVisible:p.a.bool,previousActiveRef:p.a.string,currentRef:p.a.string,nextRef:p.a.string,previousRef:p.a.string,theme:p.a.object};var kr=Cr,wr=u.default.div.withConfig({displayName:"BlockList__Root",componentId:"ny54fa-0"})(["overflow:hidden;height:100%;width:100%;position:relative;"]);u.default.div.withConfig({displayName:"BlockList__Separator",componentId:"ny54fa-1"})(["padding-top:","px;padding-bottom:","px;"],function(e){return e.top},function(e){return e.bottom}).displayName="Separator";var Sr=f?0:600,Er=f?0:400,Or=Object(u.keyframes)(["0%{opacity:0;transform:translateY(-","px);}33%{opacity:0;transform:translateY(-","px);}100%{opacity:1;transform:translateY(0px);}"],400,400),xr=Object(u.keyframes)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(","px);}"],400),Rr=Object(u.keyframes)(["0%{opacity:0;transform:translateY(","px);}33%{opacity:0;transform:translateY(","px);}100%{opacity:1;transform:translateY(0px);}"],400,400),Ir=Object(u.keyframes)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(-","px);}"],400),Ar=u.default.div.withConfig({displayName:"BlockList__Wrapper",componentId:"ny54fa-2"})(["visibility:",";position:absolute;width:100%;height:100%;padding-top:","px;will-change:transform;",";",";",";",";",";"],function(e){return e.isVisible?"visible":"hidden"},function(e){return e.topOffset},function(e){return e.isVisible&&e.appearing&&e.isNavigatingForward&&"animation: ".concat(Rr," ").concat(Sr,"ms forwards")},function(e){return e.isVisible&&e.fading&&e.isNavigatingForward&&"animation: ".concat(Ir," ").concat(Er,"ms forwards")},function(e){return e.isVisible&&e.appearing&&!e.isNavigatingForward&&"animation: ".concat(Or," ").concat(Sr,"ms forwards")},function(e){return e.isVisible&&e.fading&&!e.isNavigatingForward&&"animation: ".concat(xr," ").concat(Er,"ms forwards")},function(e){return e.fading&&"pointer-events: none"}),Tr=function(e,t){return t===dr.b?e.length:e.findIndex(function(e){return e.ref===t})},jr=function(e){var t=Object(c.useState)(e.isVisible),n=l()(t,2),o=n[0],a=n[1];function r(){e.onScroll()}Object(c.useEffect)(function(){var t=function(t){var n=t.keyCode,o=t.shiftKey,a=n===it.a.ARUP||n===it.a.TAB&&o,r=n===it.a.ARDOWN||n===it.a.TAB;n===it.a.ENTER?(Object(sr.a)("changeBlock",{direction:"next",method:"keyboard"}),e.goToNextBlockFollowingLogic(e.currentRef),t.preventDefault()):a?(Object(sr.a)("changeBlock",{direction:"previous",method:"keyboard"}),e.goToPreviousBlock(),t.preventDefault()):r&&(Object(sr.a)("changeBlock",{direction:"next",method:"keyboard"}),e.goToNextBlock(),t.preventDefault())};return window.addEventListener("keydown",t),setTimeout(function(){return e.onScroll()},1e3*Sr),function(){return window.removeEventListener("keydown",t)}},[]);var i=e.blocks,u=e.theme,d=e.currentRef,p=e.currentPath,h=e.previousActiveRef,m=e.previousRef,f=e.nextRef,g=e.layoutItemsSize,v=e.isVisible,y=e.component,C=e.goToPreviousBlock,k=e.goToNextBlock,w=Object(b.a)(p),S=Tr(i,d),E=Tr(i,h),O=h===d,x=S===dr.a,R=O||x||E<S;Object(c.useEffect)(function(){if(v){a(!0);var e=setTimeout(function(){a(!1)},Sr+100);return function(){return clearTimeout(e)}}},[v,S]);var I=Object(c.useState)(!1),A=l()(I,2),T=A[0],j=A[1],F=Object(c.useState)(!1),N=l()(F,2),D=N[0],_=N[1],P=function(e){var t=e.next,n=e.previous;j(t),_(n)};return s.a.createElement(K.Provider,{value:o},s.a.createElement(ur,{goToPreviousBlock:C,goToNextBlock:k,canSwipeNext:T,canSwipePrevious:D,fullHeight:!0},s.a.createElement(wr,null,i.map(function(t){var n=t.ref===d,o=t.ref===m,a=t.ref===h,i=t.ref===f,l="payment"===t.type,c="date"===t.type,u=v&&(n||a);return u||n||o||i||(l||c)?s.a.createElement(Ar,{key:t.ref,isVisible:u,appearing:d===t.ref,fading:d!==t.ref,isNavigatingForward:R,onScroll:r,topOffset:e.topOffset},s.a.createElement(y,{onChangeCanSwipe:P,blockRef:t.ref,layoutItemsSize:g,listIndexText:w[Tr(p,t.ref)]})):null}))),s.a.createElement(kr,{areBlocksVisible:v,theme:u,blocks:i,currentRef:d,previousRef:m,nextRef:f,previousActiveRef:h}))};jr.defaultProps={blocks:[],component:tr},jr.propTypes={component:p.a.func,blocks:p.a.array.isRequired,currentRef:p.a.string,previousActiveRef:p.a.string,previousRef:p.a.string,nextRef:p.a.string,goToNextBlock:p.a.func,goToPreviousBlock:p.a.func,isVisible:p.a.bool,layoutItemsSize:p.a.object,theme:p.a.object,onEndAutoScroll:p.a.func,onScroll:p.a.func,goToNextBlockFollowingLogic:p.a.func,scrolling:p.a.shape({anchor:p.a.string,scrollType:p.a.string}),topOffset:p.a.number};var Fr=jr,Nr=n(27),Dr=n(54),_r=function(e){return e&&e.attachment&&"image"===e.attachment.type&&e.attachment.resource&&e.attachment.resource.src},Pr={onScroll:h.a,goToNextBlockFollowingLogic:h.i,goToNextBlock:h.h,goToPreviousBlock:h.j,onEndAutoScroll:h.e},Br=Object(o.b)(function(e){var t=Object(r.isTouch)()&&Object(Xa.j)(e),n=!Object(Dr.a)(e)&&!t&&Object(Xa.i)(e),o=n?Object(Xa.A)(e):null,a=_r(o),i=0;n&&(i=a?88:60);var l=Object(Xa.b)(e);return{blocks:Object(Ga.k)(e),currentPath:Nr.b(e),currentRef:l,previousActiveRef:Object(Xa.s)(e),previousRef:Object(Ga.r)(e),nextRef:Nr.d(e,l),scrolling:Object(Xa.w)(e),theme:Object(Ja.e)(e),topOffset:i}},Pr)(Fr),Lr=u.default.a.withConfig({displayName:"RetryLink__Link",componentId:"gd74g9-0"})(["color:",";cursor:",";margin-left:5px;opacity:",";text-decoration:underline;"],function(e){return e.color},function(e){return e.disabled?"default":"pointer"},function(e){return e.disabled?.3:1}),Vr=function(e){var t=e.color,n=e.isEnabled,o=e.onClick,a=e.timeout,r=e.t;return 0===a?s.a.createElement("div",null,r("label.retryLink.retrying")):s.a.createElement("div",null,r("label.retryLink.counter",{timeout:a}),s.a.createElement(Lr,{color:t,disabled:!n,title:r("label.retryLink.title"),onClick:o},r("label.retryLink.title")))};Vr.propTypes={color:p.a.string,isEnabled:p.a.bool,onClick:p.a.func,timeout:p.a.number,t:p.a.func},Vr.defaultProps={t:function(e){return e}};var zr=Object(M.a)(Vr),Mr=function(e){var t=e.isLivePreview,n=e.isReviewModeEnabled,o=e.isPaymentBlockAnswered,a=e.price,i=e.isComplete,l=e.isSubmitting,c=e.theme,u=e.fullWidth,d=e.centered,p=e.onClick,h=e.t,m=h("label.button.submit");n?m=h("label.button.review"):o&&(m=h("label.button.submitAndPay",{price:a}));var f=n?"rgba(153, 0, 0, 0.6)":c.colors.button,b=Object(r.isTouch)()||d?"":Object(z.a)(h("label.buttonHint.default"));return s.a.createElement(P.a,{size:"large",content:m,color:f,contextBackgroundColor:c.colors.background,helperText:b,helperColor:c.colors.primary,dataQa:n?"review-mode-button deep-purple-review-mode-button":"submit-button deep-purple-submit-button",onClick:p,centered:d,fullWidth:u,isTransparent:c.hasTransparentButton&&!n,isSpinning:!t&&l,disabled:!t&&(l||i)})};Mr.defaultProps={centered:!1,theme:{colors:{},hasTransparentButton:!1},t:function(e){return e}},Mr.propTypes={isLivePreview:p.a.bool,isReviewModeEnabled:p.a.bool,isPaymentBlockAnswered:p.a.bool,isComplete:p.a.bool,isSubmitting:p.a.bool,centered:p.a.bool,price:p.a.string,theme:p.a.object,onClick:p.a.func,fullWidth:p.a.bool,t:p.a.func};var Hr=Object(M.a)(Mr),Wr=function(e){var t=e.color,n=e.t,o=e.messageKey,a=e.actionLink;return s.a.createElement(T.a,{size:"sizeN1",color:t,useDefaultFont:!0},o&&Object(z.a)(n(o)),a)};Wr.propTypes={t:p.a.func,color:p.a.string,messageKey:p.a.string,actionLink:p.a.node},Wr.defaultProps={t:function(e){return e}};var Kr=Object(M.a)(Wr),qr=u.default.section.withConfig({displayName:"UnfixedFooter__FooterWrapper",componentId:"sc-13oi4zw-0"})(["position:absolute;bottom:0;width:100%;pointer-events:",";opacity:",";transition:opacity 0.3s ease;overflow:hidden;outline:0;z-index:5;height:100%;"],function(e){return e.isActive?"auto":"none"},function(e){return e.isActive?1:0}),Ur=u.default.section.withConfig({displayName:"UnfixedFooter__FooterBackground",componentId:"sc-13oi4zw-1"})(["height:100%;"]),Yr=u.default.div.withConfig({displayName:"UnfixedFooter__FooterContent",componentId:"sc-13oi4zw-2"})(["padding-top:30px;height:50%;width:100%;border-top:1px solid ",";transition:transform 300ms ",";transform:translateY(",");position:absolute;bottom:0;"],function(e){return Object(r.footerBorderColor)(e.contextBackgroundColor)},function(e){return e.active?"cubic-bezier(0, 0.51, 0.1, 1.01)":"cubic-bezier(0.72, 0.2, 0.9, 0.39)"},function(e){return e.active?0:"100%"}),Gr=u.default.div.withConfig({displayName:"UnfixedFooter__FooterErrorMessage",componentId:"sc-13oi4zw-3"})(["padding:12px 0;background-color:rgba(153,0,0,0.8);border:1px solid rgba(0,0,0,0.15);position:absolute;width:100%;z-index:10;bottom:50%;"]),Qr=function(e){var t=e.visible,n=e.timeout,o=e.color,a=e.onRetryClick;return t?s.a.createElement(F.a,{top:2},s.a.createElement(Kr,{messageKey:"label.warning.slowSubmission",color:o,actionLink:s.a.createElement(zr,{color:o,isEnabled:0!==n,onClick:a,timeout:n})})):null},Xr=function(e){var t=e.visible,n=e.centered,o=e.color,a=e.warningText,r=e.actionText;return t&&s.a.createElement(Sn.a,{position:n?"center":"left"},s.a.createElement(F.a,{top:2},s.a.createElement(T.a,{color:o,size:"sizeN1",useDefaultFont:!0,dimmed:!0},a," - ",s.a.createElement("a",{href:"https://www.typeform.com/help/report-abuse",target:"_blank",rel:"noopener noreferrer"},r))))},Zr=function(e){function t(e){var n;return oe()(this,t),n=le()(this,se()(t).call(this,e)),E()(de()(n),"getUnfixedFooterRef",function(e){return n.unfixedFooterRef=e}),n.handlePreviousBlockNavigation=n.handlePreviousBlockNavigation.bind(de()(n)),n.handleBlockKeyboardEvent=n.handleBlockKeyboardEvent.bind(de()(n)),n.handleSubmitAction=n.handleSubmitAction.bind(de()(n)),n.handleRetryClick=n.handleRetryClick.bind(de()(n)),n.handleSwipe=n.handleSwipe.bind(de()(n)),n}return he()(t,e),re()(t,[{key:"componentDidUpdate",value:function(){this.props.isFocused&&this.unfixedFooterRef&&this.unfixedFooterRef.focus()}},{key:"handlePreviousBlockNavigation",value:function(){this.props.goToPreviousBlock()}},{key:"handleSubmitAction",value:function(){this.props.submitForm(),this.props.isReviewModeEnabled&&this.props.invalidAnswersAmount&&this.props.reviewForm()}},{key:"handleBlockKeyboardEvent",value:function(e){e.keyCode===it.a.ENTER&&this.handleSubmitAction()}},{key:"handleRetryClick",value:function(){this.props.resetRetryCount(),this.props.submitForm()}},{key:"handleSwipe",value:function(e){Math.abs(e.deltaY)>50/e.velocity&&"Down"===e.dir&&this.props.goToPreviousBlock()}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isVisible,o=e.showPhishingMessage,a=e.errorMessageId,r=e.isButtonFullWidth,i=e.isLivePreview,l=e.isReviewModeEnabled,c=e.isPaymentBlockAnswered,u=e.invalidAnswersAmount,d=e.submit,p=e.price,h=e.theme,m=e.t;return s.a.createElement(cr,{upHandler:this.handlePreviousBlockNavigation,downHandler:Ae.a},s.a.createElement(nr.a,x()({onSwiped:this.handleSwipe},{delta:10,preventDefaultTouchmoveEvent:!1,trackTouch:!0,trackMouse:!1}),s.a.createElement(qr,{isActive:t&&n,tabIndex:"-1","data-qa":"unfixed-footer",onKeyDown:this.handleBlockKeyboardEvent,id:dr.b,innerRef:this.getUnfixedFooterRef,backgroundColor:h.colors.background},t&&a&&s.a.createElement(Gr,null,s.a.createElement(Le.a,null,s.a.createElement(T.a,{size:"sizeN1",color:"#fff",fontWeight:"regular",useDefaultFont:!0},m(a,{answerAmount:u})))),s.a.createElement(Ur,{isActive:t,backgroundColor:h.colors.background,onClick:this.handlePreviousBlockNavigation}),s.a.createElement(Yr,{contextBackgroundColor:h.colors.background,active:t,"data-qa":t?"unfixed-footer--active":"",backgroundColor:h.colors.background},s.a.createElement(Le.a,null,s.a.createElement(D.a,{isVisible:!d.isComplete,type:"fade",duration:200},s.a.createElement(Sn.a,{position:r?"center":"left"},s.a.createElement(Hr,{isLivePreview:i,isReviewModeEnabled:l&&u>0,isPaymentBlockAnswered:c,isSubmitting:d.isSubmitting,isComplete:d.isComplete,fullWidth:r,centered:r,onClick:this.handleSubmitAction,price:p,theme:h}))),s.a.createElement(Xr,{color:h.colors.primary,warningText:m("label.warning.phishing"),actionText:m("label.action.phishing"),visible:o,centered:r}),s.a.createElement(Qr,{timeout:d.retry.timeout,visible:d.retry.showMessage,color:h.colors.primary,onRetryClick:this.handleRetryClick}))))))}}]),t}(c.PureComponent);Zr.propTypes={errorMessageId:p.a.string,goToPreviousBlock:p.a.func,invalidAnswersAmount:p.a.number,isActive:p.a.bool,isButtonFullWidth:p.a.bool,isFocused:p.a.bool,isLivePreview:p.a.bool,isPaymentBlockAnswered:p.a.bool,isReviewModeEnabled:p.a.bool,isVisible:p.a.bool,price:p.a.string,resetRetryCount:p.a.func,reviewForm:p.a.func,showPhishingMessage:p.a.bool,size:p.a.object,submit:p.a.object,submitForm:p.a.func,t:p.a.func,theme:p.a.object},Zr.defaultProps={showPhishingMessage:!0,errorMessageId:null,submit:{retry:{},isComplete:!1,isSubmitting:!1},submitForm:Ae.a,size:{width:800},theme:{colors:{primary:r.__OVERRIDE_THIS_COLOR,background:r.__OVERRIDE_THIS_COLOR}},t:function(e){return e}};var Jr=Object(M.a)(function(e){return s.a.createElement(Q.ResponsiveConsumer,null,function(t){var n=t.width<Z.screenSizes.md&&!e.isLivePreview;return s.a.createElement(Zr,x()({isButtonFullWidth:n},e))})}),$r=n(205),ei=n(46),ti=n(15),ni=Object(o.b)(function(e){var t=Object(Za.o)(e),n=Object(Xa.n)(e),o=Object(ei.h)(e);return t&&(o=1===t?"label.error.incompleteAnswer":"label.error.incompleteAnswers"),{submit:Object(ei.g)(e),showPhishingMessage:Object(ti.d)(e),isActive:Object($r.a)(e),isFocused:Object($r.b)(e),isLivePreview:Object(Xa.k)(e),isPaymentBlockAnswered:Object(Za.s)(e),isReviewModeEnabled:n,invalidAnswersAmount:t,errorMessageId:o,theme:Object(Ja.e)(e),price:Object(Da.b)(e)}},function(e){return Object(a.b)({reviewForm:h.g,submitForm:h.w,resetRetryCount:h.q,goToPreviousBlock:h.j},e)})(Jr),oi=n(646),ai=n.n(oi),ri=n(644),ii=n.n(ri);var li=function(e){return e&&e.title&&Object(z.a)(e.title)},ci=function(e){return e?e.childOfGroup&&e.listIndexText?null:e.titleCounterIcon||"arrow":null},si=u.default.div.withConfig({displayName:"StickyHeaderContainer__Wrapper",componentId:"sc-1tjdqrs-0"})(["position:absolute;top:0;left:0;width:100%;z-index:",";",";"],Z.zLevels.level3,function(e){return e.isVisible?"":"pointer-events: none;"}),ui=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(t){function o(e){var t;return oe()(this,o),(t=le()(this,se()(o).call(this,e))).state=e,t.shouldRender=!1,t.updateState=ii.a.apply(void 0,[t.updateState].concat(n)),t}return he()(o,t),re()(o,[{key:"componentWillReceiveProps",value:function(e){this.shouldRender=!1,this.updateState(e)}},{key:"componentWillUnmount",value:function(){this.updateState.cancel()}},{key:"updateState",value:function(e){this.shouldRender=!0,this.setState(e)}},{key:"shouldComponentUpdate",value:function(){return this.shouldRender}},{key:"render",value:function(){return s.a.createElement(e,this.state)}}]),o}(c.Component)}(ai.a,150,{}),di=function(e){return s.a.createElement(si,{isVisible:e.groupHeaderVisible||e.questionHeaderVisible},s.a.createElement(ui,e))};di.propTypes={groupHeaderVisible:p.a.bool,questionHeaderVisible:p.a.bool};var pi=Object(Q.withBreakpoint)(Object(o.b)(function(e,t){var n=Object(Dr.a)(e),o=Object(Xa.j)(e),a=Object(r.isTouch)()&&o,i=!n&&Object(Xa.h)(e)&&"sm"!==t.breakpoint&&!a,l=!n&&Object(Xa.i)(e)&&!a,c=i?Object(Xa.z)(e):null,s=l?Object(Xa.A)(e):null,u=ci(s),d=ci(c);return{groupHeaderVisible:l,groupHeaderContent:li(s),groupHeaderIcon:u,groupHeaderCounter:s&&s.listIndexText,groupHeaderImage:_r(s),questionHeaderVisible:i,questionHeaderContent:li(c),questionHeaderIcon:d,questionHeaderCounter:c&&c.listIndexText,contextBackgroundColor:Object(Ja.a)(e),contentColor:Object(Ja.c)(e),counterColor:Object(Ja.d)(e),oldLayout:!0}})(di)),hi=n(94),mi=n(643),fi=n.n(mi),bi=n(641),gi=n.n(bi),vi=n(229),yi=n(204),Ci=C()(fi.a)(function(e){return function(){window.open(e,"_blank")}}),ki=Object(vi.a)(Object(o.b)(function(e,t){var n=Object(Dr.e)(e),o=Object(ti.a)(e)(window.location.hostname,"typeform-footer"),a=Object(Za.j)(e),i=Object(Za.i)(e);return{answeredText:t.t("label.progress.proportion",{step:a,total:i}),brandButtonOnClick:Ci(o),brandButtonText:Object(z.a)(t.t("label.branding.poweredby")),buttonsColor:Object(Ja.b)(e),contextBackgroundColor:Object(Ja.a)(e),dataQa:"fixed-footer",nextButtonDisabled:!Object(yi.a)(e),percentageText:t.t("label.progress.percent",{percent:Math.round(100*a/i)}),previousButtonDisabled:!Object(yi.b)(e),progressBackgroundColor:Object(Ja.a)(e),progressColor:Object(Ja.d)(e),progressCompletedAmount:Object(Za.j)(e),progressTotalAmount:Object(Za.i)(e),progressType:Object(Xa.t)(e),transparentButtons:Object(Ja.f)(e),visible:!Object(r.isTouch)()||!Object(Xa.j)(e),withBackground:!n,withBranding:Object(Xa.x)(e),withNavigationArrows:!n,withProgress:!n&&!Object(Xa.m)(e)}},function(e){return{nextButtonOnClick:function(){e(h.h()),Object(sr.a)("changeBlock",{direction:"next",method:"footerArrow"})},previousButtonOnClick:function(){e(h.j()),Object(sr.a)("changeBlock",{direction:"previous",method:"footerArrow"})}}})(gi.a)),wi=n(300),Si=n.n(wi),Ei=n(297),Oi=n.n(Ei),xi=n(203),Ri=u.default.div.withConfig({displayName:"StickyFooter__CommitButtonWrapper",componentId:"sc-1ud3eur-0"})(["display:flex;align-items:center;"]),Ii=u.default.div.withConfig({displayName:"StickyFooter__StickyFooterPlaceholder",componentId:"sc-1ud3eur-1"})(["position:absolute;width:100%;overflow:hidden;height:","px;bottom:","px;z-index:",";opacity:",";visibility:",";"],Z.footerHeight,Z.footerHeight,function(e){return e.isActive?Z.zLevels.level3:Z.zLevels.level0},function(e){return e.isActive?"1":"0"},function(e){return e.isActive?"visible":"hidden"}),Ai=u.default.div.withConfig({displayName:"StickyFooter__StickyFooterWrapper",componentId:"sc-1ud3eur-2"})(["display:flex;align-items:center;justify-content:space-between;border-top:1px solid;height:","px;background-color:",";border-color:",";"],function(e){return e.height},function(e){return Object(r.transparent)(Object(r.mix)(e.contextBackgroundColor,e.color,.2))},function(e){return Object(r.mix)(e.contextBackgroundColor,e.color,.3)}),Ti=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).handleCommit=n.handleCommit.bind(de()(n)),n}return he()(t,e),re()(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.show!==e.show}},{key:"handleCommit",value:function(){this.props.onCommitAnswer(this.props.blockRef,xi.a)}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.theme,o=e.t,a=e.breakpoint,i=e.buttonText,l=e.showButtonIcon;if(!e.isEnabled)return null;var c="sm"===a,u=c||Object(r.isTouch)()?"":Object(z.a)(o("label.buttonHint.default"));return s.a.createElement(Ii,{isActive:t},s.a.createElement(D.a,{type:"slideUp",isVisible:t},s.a.createElement(Ai,{height:Z.footerHeight,contextBackgroundColor:n.colors.background,color:n.colors.secondary,"data-qa":"sticky-footer","data-qa-visible":t},s.a.createElement(Le.a,null,s.a.createElement(Ri,null,s.a.createElement(Oi.a,{fullWidth:c,onClick:this.handleCommit,iconSvg:l?L.a:null,size:"medium",color:n.colors.button,contextBackgroundColor:n.colors.background,transparent:n.hasTransparentButton,dataQa:"sticky-footer-button"},o(i)),u&&s.a.createElement(F.a,{left:2},s.a.createElement(Si.a,{text:u,color:n.colors.secondary})))))))}}]),t}(c.Component);Ti.defaultProps={t:function(e){return e},buttonText:"label.button.ok",showButtonIcon:!0,isEnabled:!0,theme:{colors:{background:r.__OVERRIDE_THIS_COLOR,button:r.__OVERRIDE_THIS_COLOR,secondary:r.__OVERRIDE_THIS_COLOR}}},Ti.propTypes={show:p.a.bool,theme:p.a.object,blockRef:p.a.string,breakpoint:p.a.string,buttonText:p.a.string,showButtonIcon:p.a.bool,onCommitAnswer:p.a.func,isFooterVisible:p.a.bool,isEnabled:p.a.bool,t:p.a.func};var ji=Object(Q.withBreakpoint)(Object(M.a)(Ti)),Fi=Object(o.b)(function(e){var t=Object(Xa.v)(e),n=Object(Ga.f)(e,t);if(!n)return{show:!1,theme:Object(Ja.e)(e)};var o=Object(r.isTouch)()&&Object(Xa.j)(e);return{blockRef:t,show:!Object(Dr.e)(e)&&!o,theme:Object(Ja.e)(e),buttonText:n.buttonText,showButtonIcon:!Object(Ga.v)(n),isEnabled:Object(r.isTouch)()}},function(e){return Object(a.b)({onCommitAnswer:h.c},e)})(ji),Ni=n(638),Di=n.n(Ni),_i=u.default.div.withConfig({displayName:"PrivateBanner__MessageBarWrapper",componentId:"erwqsa-0"})(["position:absolute;top:0;left:0;right:0;z-index:",";",""],Z.zLevels.level4,function(e){return e.isVisible?"":"pointer-events: none;"}),Pi=function(e){var t=e.isVisible,n=e.onRemove,o=e.t;return s.a.createElement(_i,{isVisible:t},s.a.createElement(Di.a,{isVisible:t,onRemove:n,content:o("label.warning.trialPrivate")}))};Pi.propTypes={isVisible:p.a.bool,onRemove:p.a.func,t:p.a.func};var Bi=Object(M.a)(Pi),Li=function(e){function t(e){var n;return oe()(this,t),(n=le()(this,se()(t).call(this,e))).handleOnUnload=n.handleOnUnload.bind(de()(n)),n}return he()(t,e),re()(t,[{key:"componentDidMount",value:function(){wo.b.addEventListener("beforeunload",this.handleOnUnload,!0)}},{key:"componentWillUnmount",value:function(){wo.b.removeEventListener("beforeunload",this.handleOnUnload,!0)}},{key:"handleOnUnload",value:function(e){if(this.props.enabled)return e.preventDefault(),e.returnValue="",""}},{key:"render",value:function(){return null}}]),t}(c.Component),Vi=u.default.div.withConfig({displayName:"Form__Root",componentId:"sc-18c4ntz-0"})(["height:100%;overflow:hidden;"]),zi=u.default.div.withConfig({displayName:"Form__FooterWrapper",componentId:"sc-18c4ntz-1"})(["position:absolute;opacity:inherit;right:0;left:0;bottom:0;z-index:10;pointer-events:none;"]),Mi=function(e){var t=e.isLivePreview,n=e.isPrivateForm,o=e.submit,a=void 0===o?{}:o,r=e.showBlockList,i=e.layoutItemsSize,u=e.hasBlocksWithAnswer,d=e.showWelcomeScreen,p=Object(hi.a)(),h=!t&&!p&&m.a.production&&!(a.isComplete&&a.isSuccess)&&u,b=Object(c.useState)(n),g=l()(b,2),v=g[0],y=g[1];if(Object(c.useEffect)(function(){setTimeout(function(){e.appScroll()},600)},[r]),p&&d)return null;return s.a.createElement(Vi,null,!t&&n&&s.a.createElement(Bi,{isVisible:v,onRemove:function(){y(!1)}}),s.a.createElement(pi,null),s.a.createElement(Br,{component:tr,isVisible:r,layoutItemsSize:i}),s.a.createElement(ni,{isVisible:r}),s.a.createElement(Fi,null),s.a.createElement(D.a,{isVisible:r,type:"fade",duration:f?0:500,delay:f?0:300},s.a.createElement(zi,null,s.a.createElement(ki,null))),s.a.createElement(Li,{enabled:h}))};Mi.defaultProps={submit:{},layoutItemsSize:{}},Mi.propTypes={appScroll:p.a.func,isLivePreview:p.a.bool,showBlockList:p.a.bool,hasBlocksWithAnswer:p.a.bool,submit:p.a.object,theme:p.a.object,isPrivateForm:p.a.bool,layoutItemsSize:p.a.object,showWelcomeScreen:p.a.bool};var Hi=Mi,Wi=n(20);n.d(t,"mapStateToProps",function(){return Ki});var Ki=function(e){return{isLivePreview:Object(Xa.k)(e),submit:Object(ei.g)(e),theme:e.form.theme,showBlockList:!Object(Wi.b)(e)&&!Object(Wi.a)(e),isPrivateForm:Object(Xa.l)(e),isFooterVisible:!Object(r.isTouch)()||!Object(Xa.j)(e),hasBlocksWithAnswer:Object(Za.n)(e),showWelcomeScreen:Object(Wi.b)(e)}};t.default=Object(o.b)(Ki,function(e){return Object(a.b)({appScroll:h.a},e)})(Hi)}}]);